{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{CogIcon,PlayIcon,PauseIcon,ExclamationTriangleIcon,CheckCircleIcon,WrenchScrewdriverIcon}from'@heroicons/react/24/outline';import{useAuth}from'../contexts/AuthContext.tsx';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductionLines=()=>{const{user}=useAuth();// State management\nconst[productionLines,setProductionLines]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedLine,setSelectedLine]=useState(null);const[showConfigModal,setShowConfigModal]=useState(false);const[editingConfig,setEditingConfig]=useState(null);const[saving,setSaving]=useState(false);// API base URL\nconst baseUrl=process.env.NODE_ENV==='production'?window.location.origin:'https://smtdatabase01-production.up.railway.app';// Fetch production lines\nconst fetchProductionLines=useCallback(async()=>{try{const response=await fetch(`${baseUrl}/api/production-lines`,{headers:{'Authorization':`Bearer ${localStorage.getItem('auth_token')}`}});if(!response.ok){if(response.status===401){throw new Error('Authentication failed. Please log in again.');}throw new Error(`Failed to fetch production lines: ${response.status} ${response.statusText}`);}const data=await response.json();setProductionLines(data.production_lines||[]);setError(null);}catch(err){console.error('Error fetching production lines:',err);setError(err instanceof Error?err.message:'Failed to load production lines');}finally{setLoading(false);}},[baseUrl]);// Update line configuration\nconst updateLineConfig=async(lineId,config)=>{if(!user||!['admin','scheduler'].includes(user.role)){setError('Insufficient permissions to update line configuration');return;}setSaving(true);try{console.log('Sending config update:',{lineId,config});const response=await fetch(`${baseUrl}/api/production-lines/${lineId}/config`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('auth_token')}`},body:JSON.stringify(config)});const responseData=await response.json();console.log('Response:',{status:response.status,data:responseData});if(!response.ok){throw new Error(responseData.error||'Failed to update line configuration');}await fetchProductionLines();setShowConfigModal(false);setSelectedLine(null);setEditingConfig(null);setError(null);}catch(err){console.error('Error updating line config:',err);setError(err instanceof Error?err.message:'Failed to update line configuration');}finally{setSaving(false);}};// Update line status\nconst updateLineStatus=async(lineId,status)=>{if(!user||!['admin','supervisor'].includes(user.role)){setError('Insufficient permissions to update line status');return;}try{const response=await fetch(`${baseUrl}/api/production-lines/${lineId}/status`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('auth_token')}`},body:JSON.stringify({status})});if(!response.ok)throw new Error('Failed to update line status');await fetchProductionLines();setError(null);}catch(err){console.error('Error updating line status:',err);setError('Failed to update line status');}};// Load data on mount\nuseEffect(()=>{fetchProductionLines();},[fetchProductionLines]);// Get status color\nconst getStatusColor=status=>{const statusStr=(status===null||status===void 0?void 0:status.toLowerCase())||'idle';switch(statusStr){case'running':return'bg-green-100 text-green-800';case'idle':return'bg-yellow-100 text-yellow-800';case'maintenance':return'bg-orange-100 text-orange-800';case'down':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};// Get utilization color\nconst getUtilizationColor=utilization=>{const util=utilization||0;if(util>=90)return'text-red-600';if(util>=75)return'text-orange-600';if(util>=50)return'text-yellow-600';return'text-green-600';};// Check if line is hand placement\nconst isHandPlacement=lineName=>{return(lineName===null||lineName===void 0?void 0:lineName.toLowerCase().includes('hand'))||false;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-sy-black-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-600\",children:\"Loading production lines...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-sy-black-900\",children:\"Production Lines\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-sy-black-600\",children:\"Monitor and manage SMT production lines\"})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-700\",children:error})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:productionLines.map(line=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:line.line_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-sy-black-500\",children:line.line_type||'SMT'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[isHandPlacement(line.line_name)&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\",children:\"Manual Only\"}),/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(line.status)}`,children:line.status||'idle'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-500\",children:\"Utilization\"}),/*#__PURE__*/_jsxs(\"p\",{className:`font-medium ${getUtilizationColor(line.current_utilization)}`,children:[line.current_utilization||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-500\",children:\"Available\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-sy-black-900\",children:[line.available_capacity||0,\"h\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-500\",children:\"Shifts/Day\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-sy-black-900\",children:line.shifts_per_day||1})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-500\",children:\"Hours/Shift\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-sy-black-900\",children:[line.hours_per_shift||8,\"h\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-sy-black-500 mb-2\",children:\"Work Hours\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-400\",children:\"Shift:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-sy-black-700\",children:[line.start_time||'08:00',\" - \",line.end_time||'17:00']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-400\",children:\"Lunch:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-sy-black-700\",children:[line.lunch_break_start||'12:00',\" (\",line.lunch_break_duration||60,\"m)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-400\",children:\"Breaks:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-sy-black-700\",children:[line.break_duration||15,\"m\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-400\",children:\"Days/Week:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-sy-black-700\",children:line.days_per_week||5})]})]})]}),line.efficiency_rating&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-sy-black-500\",children:\"Efficiency\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 text-green-500 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-sy-black-900\",children:[line.efficiency_rating,\"%\"]})]})]})}),line.maintenance_due&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-4 w-4 text-orange-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-orange-700\",children:[\"Maintenance due: \",new Date(line.maintenance_due).toLocaleDateString()]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 bg-gray-50 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:user&&['admin','supervisor'].includes(user.role)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateLineStatus(line.id,'running'),disabled:(line.status||'idle')==='running',className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-green-700 bg-green-100 hover:bg-green-200 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(PlayIcon,{className:\"h-3 w-3 mr-1\"}),\"Start\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateLineStatus(line.id,'idle'),disabled:(line.status||'idle')==='idle',className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-yellow-700 bg-yellow-100 hover:bg-yellow-200 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(PauseIcon,{className:\"h-3 w-3 mr-1\"}),\"Pause\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateLineStatus(line.id,'maintenance'),disabled:(line.status||'idle')==='maintenance',className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-orange-700 bg-orange-100 hover:bg-orange-200 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(WrenchScrewdriverIcon,{className:\"h-3 w-3 mr-1\"}),\"Maintenance\"]})]})}),user&&['admin','scheduler'].includes(user.role)&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedLine(line);setEditingConfig({hours_per_shift:line.hours_per_shift||8,shifts_per_day:line.shifts_per_day||1,days_per_week:line.days_per_week||5,time_multiplier:line.time_multiplier||1,start_time:line.start_time||'08:00',end_time:line.end_time||'17:00',lunch_break_duration:line.lunch_break_duration||30,lunch_break_start:line.lunch_break_start||'12:00',break_duration:line.break_duration||15,auto_schedule_enabled:!isHandPlacement(line.line_name),maintenance_interval_days:30,efficiency_target:85});setShowConfigModal(true);},className:\"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-sy-black-700 bg-white hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"h-3 w-3 mr-1\"}),\"Config\"]})]})})]},line.id))}),showConfigModal&&selectedLine&&editingConfig&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",onClick:()=>{setShowConfigModal(false);setSelectedLine(null);setEditingConfig(null);},children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:[\"Configure \",selectedLine.line_name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowConfigModal(false);setSelectedLine(null);setEditingConfig(null);},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Hours per Shift\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingConfig.hours_per_shift,onChange:e=>setEditingConfig(prev=>({...prev,hours_per_shift:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Shifts per Day\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingConfig.shifts_per_day,onChange:e=>setEditingConfig(prev=>({...prev,shifts_per_day:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Days per Week\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingConfig.days_per_week,onChange:e=>setEditingConfig(prev=>({...prev,days_per_week:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Time Multiplier\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:editingConfig.time_multiplier,onChange:e=>setEditingConfig(prev=>({...prev,time_multiplier:parseFloat(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingConfig.start_time,onChange:e=>setEditingConfig(prev=>({...prev,start_time:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingConfig.end_time,onChange:e=>setEditingConfig(prev=>({...prev,end_time:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Lunch Break Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingConfig.lunch_break_duration,onChange:e=>setEditingConfig(prev=>({...prev,lunch_break_duration:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Lunch Break Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingConfig.lunch_break_start,onChange:e=>setEditingConfig(prev=>({...prev,lunch_break_start:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Break Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingConfig.break_duration,onChange:e=>setEditingConfig(prev=>({...prev,break_duration:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),!isHandPlacement(selectedLine.line_name)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"auto_schedule\",checked:editingConfig.auto_schedule_enabled,onChange:e=>setEditingConfig(prev=>({...prev,auto_schedule_enabled:e.target.checked})),className:\"h-4 w-4 text-sy-green-600 focus:ring-sy-green-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auto_schedule\",className:\"ml-2 block text-sm text-sy-black-700\",children:\"Enable Auto-Scheduling\"})]}),isHandPlacement(selectedLine.line_name)&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 border border-purple-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-purple-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-purple-800\",children:\"Manual Only\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-purple-700\",children:\"Hand placement lines are excluded from auto-scheduling and require manual assignment.\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowConfigModal(false);setSelectedLine(null);setEditingConfig(null);},className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateLineConfig(selectedLine.id,editingConfig),disabled:saving,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700 disabled:opacity-50\",children:saving?'Saving...':'Save'})]})]})})})]});};export default ProductionLines;","map":{"version":3,"names":["React","useState","useEffect","useCallback","CogIcon","PlayIcon","PauseIcon","ExclamationTriangleIcon","CheckCircleIcon","WrenchScrewdriverIcon","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductionLines","user","productionLines","setProductionLines","loading","setLoading","error","setError","selectedLine","setSelectedLine","showConfigModal","setShowConfigModal","editingConfig","setEditingConfig","saving","setSaving","baseUrl","process","env","NODE_ENV","window","location","origin","fetchProductionLines","response","fetch","headers","localStorage","getItem","ok","status","Error","statusText","data","json","production_lines","err","console","message","updateLineConfig","lineId","config","includes","role","log","method","body","JSON","stringify","responseData","updateLineStatus","getStatusColor","statusStr","toLowerCase","getUtilizationColor","utilization","util","isHandPlacement","lineName","className","children","map","line","line_name","line_type","current_utilization","available_capacity","shifts_per_day","hours_per_shift","start_time","end_time","lunch_break_start","lunch_break_duration","break_duration","days_per_week","efficiency_rating","maintenance_due","Date","toLocaleDateString","onClick","id","disabled","time_multiplier","auto_schedule_enabled","maintenance_interval_days","efficiency_target","e","stopPropagation","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","value","onChange","prev","parseInt","target","step","parseFloat","checked","htmlFor"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/pages/ProductionLines.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  CogIcon, \n  PlayIcon, \n  PauseIcon, \n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  WrenchScrewdriverIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../contexts/AuthContext.tsx';\n\ninterface ProductionLine {\n  id: string;\n  line_name: string;\n  line_type: string | null;\n  status: string | null;\n  current_utilization: number | null;\n  available_capacity: number | null;\n  active: boolean | null;\n  hours_per_shift: number | null;\n  shifts_per_day: number | null;\n  days_per_week: number | null;\n  time_multiplier: number | null;\n  start_time: string | null;\n  end_time: string | null;\n  lunch_break_duration: number | null;\n  lunch_break_start: string | null;\n  break_duration: number | null;\n  created_at: string | null;\n  updated_at: string | null;\n  next_available_slot?: string;\n  current_work_order?: string;\n  efficiency_rating?: number;\n  maintenance_due?: string;\n  notes?: string;\n}\n\ninterface LineConfig {\n  hours_per_shift: number;\n  shifts_per_day: number;\n  days_per_week: number;\n  time_multiplier: number;\n  start_time: string;\n  end_time: string;\n  lunch_break_duration: number;\n  lunch_break_start: string;\n  break_duration: number;\n  auto_schedule_enabled: boolean;\n  maintenance_interval_days: number;\n  efficiency_target: number;\n}\n\nconst ProductionLines: React.FC = () => {\n  const { user } = useAuth();\n  \n  // State management\n  const [productionLines, setProductionLines] = useState<ProductionLine[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedLine, setSelectedLine] = useState<ProductionLine | null>(null);\n  const [showConfigModal, setShowConfigModal] = useState(false);\n  const [editingConfig, setEditingConfig] = useState<LineConfig | null>(null);\n  const [saving, setSaving] = useState(false);\n\n  // API base URL\n  const baseUrl = process.env.NODE_ENV === 'production' \n    ? window.location.origin\n    : 'https://smtdatabase01-production.up.railway.app';\n\n  // Fetch production lines\n  const fetchProductionLines = useCallback(async () => {\n    try {\n      const response = await fetch(`${baseUrl}/api/production-lines`, {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n        }\n      });\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          throw new Error('Authentication failed. Please log in again.');\n        }\n        throw new Error(`Failed to fetch production lines: ${response.status} ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      setProductionLines(data.production_lines || []);\n      setError(null);\n    } catch (err) {\n      console.error('Error fetching production lines:', err);\n      setError(err instanceof Error ? err.message : 'Failed to load production lines');\n    } finally {\n      setLoading(false);\n    }\n  }, [baseUrl]);\n\n  // Update line configuration\n  const updateLineConfig = async (lineId: string, config: LineConfig) => {\n    if (!user || !['admin', 'scheduler'].includes(user.role)) {\n      setError('Insufficient permissions to update line configuration');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      console.log('Sending config update:', { lineId, config });\n      \n      const response = await fetch(`${baseUrl}/api/production-lines/${lineId}/config`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n        },\n        body: JSON.stringify(config)\n      });\n\n      const responseData = await response.json();\n      console.log('Response:', { status: response.status, data: responseData });\n\n      if (!response.ok) {\n        throw new Error(responseData.error || 'Failed to update line configuration');\n      }\n      \n      await fetchProductionLines();\n      setShowConfigModal(false);\n      setSelectedLine(null);\n      setEditingConfig(null);\n      setError(null);\n    } catch (err) {\n      console.error('Error updating line config:', err);\n      setError(err instanceof Error ? err.message : 'Failed to update line configuration');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Update line status\n  const updateLineStatus = async (lineId: string, status: string) => {\n    if (!user || !['admin', 'supervisor'].includes(user.role)) {\n      setError('Insufficient permissions to update line status');\n      return;\n    }\n\n    try {\n      const response = await fetch(`${baseUrl}/api/production-lines/${lineId}/status`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n        },\n        body: JSON.stringify({ status })\n      });\n\n      if (!response.ok) throw new Error('Failed to update line status');\n      \n      await fetchProductionLines();\n      setError(null);\n    } catch (err) {\n      console.error('Error updating line status:', err);\n      setError('Failed to update line status');\n    }\n  };\n\n  // Load data on mount\n  useEffect(() => {\n    fetchProductionLines();\n  }, [fetchProductionLines]);\n\n  // Get status color\n  const getStatusColor = (status: string | null | undefined) => {\n    const statusStr = status?.toLowerCase() || 'idle';\n    switch (statusStr) {\n      case 'running':\n        return 'bg-green-100 text-green-800';\n      case 'idle':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'maintenance':\n        return 'bg-orange-100 text-orange-800';\n      case 'down':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Get utilization color\n  const getUtilizationColor = (utilization: number | null | undefined) => {\n    const util = utilization || 0;\n    if (util >= 90) return 'text-red-600';\n    if (util >= 75) return 'text-orange-600';\n    if (util >= 50) return 'text-yellow-600';\n    return 'text-green-600';\n  };\n\n  // Check if line is hand placement\n  const isHandPlacement = (lineName: string | null | undefined) => {\n    return lineName?.toLowerCase().includes('hand') || false;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-600 mx-auto mb-4\"></div>\n          <p className=\"text-sy-black-600\">Loading production lines...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-sy-black-900\">Production Lines</h1>\n          <p className=\"mt-1 text-sm text-sy-black-600\">\n            Monitor and manage SMT production lines\n          </p>\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n              <p className=\"mt-1 text-sm text-red-700\">{error}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Production Lines Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {productionLines.map((line) => (\n          <div key={line.id} className=\"bg-white shadow rounded-lg overflow-hidden\">\n            {/* Line Header */}\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-sy-black-900\">{line.line_name}</h3>\n                  <p className=\"text-sm text-sy-black-500\">{line.line_type || 'SMT'}</p>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {isHandPlacement(line.line_name) && (\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\n                      Manual Only\n                    </span>\n                  )}\n                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(line.status)}`}>\n                    {line.status || 'idle'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Line Stats */}\n            <div className=\"px-6 py-4\">\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <p className=\"text-sy-black-500\">Utilization</p>\n                  <p className={`font-medium ${getUtilizationColor(line.current_utilization)}`}>\n                    {line.current_utilization || 0}%\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sy-black-500\">Available</p>\n                  <p className=\"font-medium text-sy-black-900\">\n                    {line.available_capacity || 0}h\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sy-black-500\">Shifts/Day</p>\n                  <p className=\"font-medium text-sy-black-900\">\n                    {line.shifts_per_day || 1}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sy-black-500\">Hours/Shift</p>\n                  <p className=\"font-medium text-sy-black-900\">\n                    {line.hours_per_shift || 8}h\n                  </p>\n                </div>\n              </div>\n\n              {/* Work Hours Summary */}\n              <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                <div className=\"text-sm text-sy-black-500 mb-2\">Work Hours</div>\n                <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                  <div>\n                    <span className=\"text-sy-black-400\">Shift:</span>\n                    <span className=\"ml-1 text-sy-black-700\">\n                      {line.start_time || '08:00'} - {line.end_time || '17:00'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-sy-black-400\">Lunch:</span>\n                    <span className=\"ml-1 text-sy-black-700\">\n                      {line.lunch_break_start || '12:00'} ({line.lunch_break_duration || 60}m)\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-sy-black-400\">Breaks:</span>\n                    <span className=\"ml-1 text-sy-black-700\">\n                      {line.break_duration || 15}m\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-sy-black-400\">Days/Week:</span>\n                    <span className=\"ml-1 text-sy-black-700\">\n                      {line.days_per_week || 5}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Efficiency Rating */}\n              {line.efficiency_rating && (\n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-sy-black-500\">Efficiency</span>\n                    <div className=\"flex items-center\">\n                      <CheckCircleIcon className=\"h-4 w-4 text-green-500 mr-1\" />\n                      <span className=\"text-sm font-medium text-sy-black-900\">\n                        {line.efficiency_rating}%\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Maintenance Warning */}\n              {line.maintenance_due && (\n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <div className=\"flex items-center\">\n                    <ExclamationTriangleIcon className=\"h-4 w-4 text-orange-500 mr-2\" />\n                    <span className=\"text-sm text-orange-700\">\n                      Maintenance due: {new Date(line.maintenance_due).toLocaleDateString()}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Line Actions */}\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex space-x-2\">\n                  {user && ['admin', 'supervisor'].includes(user.role) && (\n                    <>\n                      <button\n                        onClick={() => updateLineStatus(line.id, 'running')}\n                        disabled={(line.status || 'idle') === 'running'}\n                        className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-green-700 bg-green-100 hover:bg-green-200 disabled:opacity-50\"\n                      >\n                        <PlayIcon className=\"h-3 w-3 mr-1\" />\n                        Start\n                      </button>\n                      <button\n                        onClick={() => updateLineStatus(line.id, 'idle')}\n                        disabled={(line.status || 'idle') === 'idle'}\n                        className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-yellow-700 bg-yellow-100 hover:bg-yellow-200 disabled:opacity-50\"\n                      >\n                        <PauseIcon className=\"h-3 w-3 mr-1\" />\n                        Pause\n                      </button>\n                      <button\n                        onClick={() => updateLineStatus(line.id, 'maintenance')}\n                        disabled={(line.status || 'idle') === 'maintenance'}\n                        className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-orange-700 bg-orange-100 hover:bg-orange-200 disabled:opacity-50\"\n                      >\n                        <WrenchScrewdriverIcon className=\"h-3 w-3 mr-1\" />\n                        Maintenance\n                      </button>\n                    </>\n                  )}\n                </div>\n                \n                {user && ['admin', 'scheduler'].includes(user.role) && (\n                  <button\n                    onClick={() => {\n                      setSelectedLine(line);\n                      setEditingConfig({\n                        hours_per_shift: line.hours_per_shift || 8,\n                        shifts_per_day: line.shifts_per_day || 1,\n                        days_per_week: line.days_per_week || 5,\n                        time_multiplier: line.time_multiplier || 1,\n                        start_time: line.start_time || '08:00',\n                        end_time: line.end_time || '17:00',\n                        lunch_break_duration: line.lunch_break_duration || 30,\n                        lunch_break_start: line.lunch_break_start || '12:00',\n                        break_duration: line.break_duration || 15,\n                        auto_schedule_enabled: !isHandPlacement(line.line_name),\n                        maintenance_interval_days: 30,\n                        efficiency_target: 85\n                      });\n                      setShowConfigModal(true);\n                    }}\n                    className=\"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-sy-black-700 bg-white hover:bg-gray-50\"\n                  >\n                    <CogIcon className=\"h-3 w-3 mr-1\" />\n                    Config\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Configuration Modal */}\n      {showConfigModal && selectedLine && editingConfig && (\n        <div \n          className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\"\n          onClick={() => {\n            setShowConfigModal(false);\n            setSelectedLine(null);\n            setEditingConfig(null);\n          }}\n        >\n          <div \n            className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"mt-3\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-sy-black-900\">\n                  Configure {selectedLine.line_name}\n                </h3>\n                <button\n                  onClick={() => {\n                    setShowConfigModal(false);\n                    setSelectedLine(null);\n                    setEditingConfig(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Hours per Shift\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingConfig.hours_per_shift}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, hours_per_shift: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Shifts per Day\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingConfig.shifts_per_day}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, shifts_per_day: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Days per Week\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingConfig.days_per_week}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, days_per_week: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Time Multiplier\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={editingConfig.time_multiplier}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, time_multiplier: parseFloat(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Start Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingConfig.start_time}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, start_time: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    End Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingConfig.end_time}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, end_time: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Lunch Break Duration (minutes)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingConfig.lunch_break_duration}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, lunch_break_duration: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Lunch Break Start Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingConfig.lunch_break_start}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, lunch_break_start: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Break Duration (minutes)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingConfig.break_duration}\n                    onChange={(e) => setEditingConfig(prev => ({ ...prev!, break_duration: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                {!isHandPlacement(selectedLine.line_name) && (\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"auto_schedule\"\n                      checked={editingConfig.auto_schedule_enabled}\n                      onChange={(e) => setEditingConfig(prev => ({ ...prev!, auto_schedule_enabled: e.target.checked }))}\n                      className=\"h-4 w-4 text-sy-green-600 focus:ring-sy-green-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"auto_schedule\" className=\"ml-2 block text-sm text-sy-black-700\">\n                      Enable Auto-Scheduling\n                    </label>\n                  </div>\n                )}\n                \n                {isHandPlacement(selectedLine.line_name) && (\n                  <div className=\"bg-purple-50 border border-purple-200 rounded-md p-3\">\n                    <div className=\"flex\">\n                      <ExclamationTriangleIcon className=\"h-5 w-5 text-purple-400\" />\n                      <div className=\"ml-3\">\n                        <h3 className=\"text-sm font-medium text-purple-800\">Manual Only</h3>\n                        <p className=\"mt-1 text-sm text-purple-700\">\n                          Hand placement lines are excluded from auto-scheduling and require manual assignment.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => {\n                    setShowConfigModal(false);\n                    setSelectedLine(null);\n                    setEditingConfig(null);\n                  }}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => updateLineConfig(selectedLine.id, editingConfig)}\n                  disabled={saving}\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700 disabled:opacity-50\"\n                >\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductionLines; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}