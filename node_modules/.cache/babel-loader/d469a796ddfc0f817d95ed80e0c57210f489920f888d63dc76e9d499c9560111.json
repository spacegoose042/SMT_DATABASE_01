{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{ChevronDownIcon,CheckIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STATUS_OPTIONS=[{value:'1st Side Ready',label:'1st Side Ready',color:'bg-yellow-500'},{value:'Ready',label:'Ready',color:'bg-green-500'},{value:'Ready*',label:'Ready*',color:'bg-green-400'},{value:'In Progress',label:'In Progress',color:'bg-blue-500'},{value:'Setup',label:'Setup',color:'bg-purple-500'},{value:'Running',label:'Running',color:'bg-indigo-500'},{value:'Quality Check',label:'Quality Check',color:'bg-orange-500'},{value:'On Hold',label:'On Hold',color:'bg-yellow-600'},{value:'Issues',label:'Issues',color:'bg-red-500'},{value:'Completed',label:'Completed',color:'bg-green-600'},{value:'Missing TSM-125-01-L-DV',label:'Missing Parts',color:'bg-red-600'},{value:'Cancelled',label:'Cancelled',color:'bg-gray-500'}];const StatusDropdown=_ref=>{let{currentStatus,workOrderId,workOrderNumber,onStatusChange,disabled=false}=_ref;const[isOpen,setIsOpen]=useState(false);const[isUpdating,setIsUpdating]=useState(false);const dropdownRef=useRef(null);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const currentStatusOption=STATUS_OPTIONS.find(option=>option.value===currentStatus)||{value:currentStatus,label:currentStatus,color:'bg-gray-400'};const handleStatusSelect=async newStatus=>{if(newStatus===currentStatus||isUpdating)return;setIsUpdating(true);setIsOpen(false);try{await onStatusChange(workOrderId,newStatus);}catch(error){console.error('Failed to update status:',error);// The parent component will handle error display\n}finally{setIsUpdating(false);}};if(disabled){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${currentStatusOption.color}`}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:currentStatusOption.label})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:dropdownRef,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),disabled:isUpdating,className:`\n          flex items-center space-x-2 px-3 py-1 rounded-md border text-sm\n          transition-colors duration-200\n          ${isUpdating?'bg-gray-100 cursor-not-allowed opacity-50':'bg-white hover:bg-gray-50 cursor-pointer border-gray-300'}\n        `,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${currentStatusOption.color}`}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:currentStatusOption.label}),isUpdating?/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin\"}):/*#__PURE__*/_jsx(ChevronDownIcon,{className:`w-4 h-4 text-gray-400 transition-transform ${isOpen?'rotate-180':''}`})]}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-50 mt-1 w-48 bg-white border border-gray-300 rounded-md shadow-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-1\",children:STATUS_OPTIONS.map(option=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleStatusSelect(option.value),className:`\n                  w-full flex items-center space-x-3 px-3 py-2 text-sm text-left\n                  transition-colors duration-150\n                  ${option.value===currentStatus?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-100'}\n                `,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-3 h-3 rounded-full ${option.color}`}),/*#__PURE__*/_jsx(\"span\",{className:\"flex-1\",children:option.label}),option.value===currentStatus&&/*#__PURE__*/_jsx(CheckIcon,{className:\"w-4 h-4 text-blue-600\"})]},option.value))})})]});};export default StatusDropdown;","map":{"version":3,"names":["React","useState","useRef","useEffect","ChevronDownIcon","CheckIcon","jsx","_jsx","jsxs","_jsxs","STATUS_OPTIONS","value","label","color","StatusDropdown","_ref","currentStatus","workOrderId","workOrderNumber","onStatusChange","disabled","isOpen","setIsOpen","isUpdating","setIsUpdating","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","currentStatusOption","find","option","handleStatusSelect","newStatus","error","console","className","children","ref","onClick","map"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/components/StatusDropdown.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { ChevronDownIcon, CheckIcon } from '@heroicons/react/24/outline';\n\ninterface StatusOption {\n  value: string;\n  label: string;\n  color: string;\n}\n\ninterface StatusDropdownProps {\n  currentStatus: string;\n  workOrderId: string;\n  workOrderNumber: string;\n  onStatusChange: (workOrderId: string, newStatus: string) => void;\n  disabled?: boolean;\n}\n\nconst STATUS_OPTIONS: StatusOption[] = [\n  { value: '1st Side Ready', label: '1st Side Ready', color: 'bg-yellow-500' },\n  { value: 'Ready', label: 'Ready', color: 'bg-green-500' },\n  { value: 'Ready*', label: 'Ready*', color: 'bg-green-400' },\n  { value: 'In Progress', label: 'In Progress', color: 'bg-blue-500' },\n  { value: 'Setup', label: 'Setup', color: 'bg-purple-500' },\n  { value: 'Running', label: 'Running', color: 'bg-indigo-500' },\n  { value: 'Quality Check', label: 'Quality Check', color: 'bg-orange-500' },\n  { value: 'On Hold', label: 'On Hold', color: 'bg-yellow-600' },\n  { value: 'Issues', label: 'Issues', color: 'bg-red-500' },\n  { value: 'Completed', label: 'Completed', color: 'bg-green-600' },\n  { value: 'Missing TSM-125-01-L-DV', label: 'Missing Parts', color: 'bg-red-600' },\n  { value: 'Cancelled', label: 'Cancelled', color: 'bg-gray-500' }\n];\n\nconst StatusDropdown: React.FC<StatusDropdownProps> = ({\n  currentStatus,\n  workOrderId,\n  workOrderNumber,\n  onStatusChange,\n  disabled = false\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const currentStatusOption = STATUS_OPTIONS.find(option => option.value === currentStatus) || {\n    value: currentStatus,\n    label: currentStatus,\n    color: 'bg-gray-400'\n  };\n\n  const handleStatusSelect = async (newStatus: string) => {\n    if (newStatus === currentStatus || isUpdating) return;\n\n    setIsUpdating(true);\n    setIsOpen(false);\n\n    try {\n      await onStatusChange(workOrderId, newStatus);\n    } catch (error) {\n      console.error('Failed to update status:', error);\n      // The parent component will handle error display\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  if (disabled) {\n    return (\n      <div className=\"flex items-center space-x-2\">\n        <div className={`w-3 h-3 rounded-full ${currentStatusOption.color}`}></div>\n        <span className=\"text-sm text-gray-600\">{currentStatusOption.label}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        disabled={isUpdating}\n        className={`\n          flex items-center space-x-2 px-3 py-1 rounded-md border text-sm\n          transition-colors duration-200\n          ${isUpdating\n            ? 'bg-gray-100 cursor-not-allowed opacity-50'\n            : 'bg-white hover:bg-gray-50 cursor-pointer border-gray-300'\n          }\n        `}\n      >\n        <div className={`w-3 h-3 rounded-full ${currentStatusOption.color}`}></div>\n        <span className=\"text-gray-700\">{currentStatusOption.label}</span>\n        {isUpdating ? (\n          <div className=\"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin\"></div>\n        ) : (\n          <ChevronDownIcon className={`w-4 h-4 text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`} />\n        )}\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute z-50 mt-1 w-48 bg-white border border-gray-300 rounded-md shadow-lg\">\n          <div className=\"py-1\">\n            {STATUS_OPTIONS.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => handleStatusSelect(option.value)}\n                className={`\n                  w-full flex items-center space-x-3 px-3 py-2 text-sm text-left\n                  transition-colors duration-150\n                  ${option.value === currentStatus\n                    ? 'bg-blue-50 text-blue-700'\n                    : 'text-gray-700 hover:bg-gray-100'\n                  }\n                `}\n              >\n                <div className={`w-3 h-3 rounded-full ${option.color}`}></div>\n                <span className=\"flex-1\">{option.label}</span>\n                {option.value === currentStatus && (\n                  <CheckIcon className=\"w-4 h-4 text-blue-600\" />\n                )}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StatusDropdown; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}