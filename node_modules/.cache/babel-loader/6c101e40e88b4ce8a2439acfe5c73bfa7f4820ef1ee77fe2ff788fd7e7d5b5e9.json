{"ast":null,"code":"var _jsxFileName = \"/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/components/ProtectedRoute.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport { AlertTriangle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRoles = [],\n  fallbackPath = '/login'\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    isLoading,\n    user,\n    hasRole\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-sy-black-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sy-black-700\",\n          children: \"Checking authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: fallbackPath,\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role permissions if required\n  if (requiredRoles.length > 0 && !hasRole(requiredRoles)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-sy-black-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-12 w-12 text-red-500 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-sy-black-900 mb-2\",\n          children: \"Access Denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sy-black-600 mb-4\",\n          children: \"You don't have permission to access this page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-sy-black-500 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Your role: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: user === null || user === void 0 ? void 0 : user.role\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Required roles: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: requiredRoles.join(', ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.history.back(),\n          className: \"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\",\n          children: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(ProtectedRoute, \"MbdvTXptH5r1eFoSO9i7BiGX70s=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","AlertTriangle","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","requiredRoles","fallbackPath","_s","isAuthenticated","isLoading","user","hasRole","location","className","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","length","role","join","onClick","window","history","back","_c","$RefreshReg$"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport { AlertTriangle } from 'lucide-react';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRoles?: string[];\n  fallbackPath?: string;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \n  children, \n  requiredRoles = [], \n  fallbackPath = '/login' \n}) => {\n  const { isAuthenticated, isLoading, user, hasRole } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"></div>\n          <span className=\"text-sy-black-700\">Checking authentication...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to={fallbackPath} state={{ from: location }} replace />;\n  }\n\n  // Check role permissions if required\n  if (requiredRoles.length > 0 && !hasRole(requiredRoles)) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-sy-black-900 mb-2\">Access Denied</h3>\n          <p className=\"text-sy-black-600 mb-4\">\n            You don't have permission to access this page.\n          </p>\n          <div className=\"text-sm text-sy-black-500 mb-4\">\n            <p>Your role: <span className=\"font-medium\">{user?.role}</span></p>\n            <p>Required roles: <span className=\"font-medium\">{requiredRoles.join(', ')}</span></p>\n          </div>\n          <button\n            onClick={() => window.history.back()}\n            className=\"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}