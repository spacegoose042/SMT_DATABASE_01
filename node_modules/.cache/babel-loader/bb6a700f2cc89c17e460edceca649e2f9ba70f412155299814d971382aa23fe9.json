{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Clock,Users,AlertTriangle,QrCodeIcon}from'lucide-react';import{useSocket}from'../contexts/SocketContext.tsx';import{useAuth}from'../contexts/AuthContext.tsx';import StatusDropdown from'../components/StatusDropdown.tsx';import QRCodeDisplay from'../components/QRCodeDisplay.tsx';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TimelineView=()=>{const navigate=useNavigate();const[workOrders,setWorkOrders]=useState([]);const[productionLines,setProductionLines]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedWeeks,setSelectedWeeks]=useState(4);const[lastUpdated,setLastUpdated]=useState('');const[selectedWorkOrder,setSelectedWorkOrder]=useState(null);const[userInteractions,setUserInteractions]=useState(new Map());const[statusUpdateError,setStatusUpdateError]=useState(null);const{user}=useAuth();const{connected,socketConnected,onWorkOrderUpdate,joinRooms,roomUsers,userCount,onUserJoinedRoom,onUserLeftRoom,onTimelineInteraction,sendTimelineInteraction,getRoomUsers}=useSocket();// Join Socket.IO room for real-time timeline updates\nuseEffect(()=>{if(socketConnected){joinRooms(['timeline']);// Get current room users\nsetTimeout(()=>getRoomUsers('timeline'),500);}},[socketConnected,joinRooms,getRoomUsers]);// Listen for user presence changes\nuseEffect(()=>{const cleanupJoined=onUserJoinedRoom(data=>{console.log(`üëã ${data.user.username} joined the timeline view`);// Could show a notification here\n});const cleanupLeft=onUserLeftRoom(data=>{console.log(`üëã ${data.user.username} left the timeline view`);// Clear any interactions from this user\nsetUserInteractions(prev=>{const newMap=new Map(prev);newMap.delete(data.user.user_id);return newMap;});});return()=>{cleanupJoined();cleanupLeft();};},[onUserJoinedRoom,onUserLeftRoom]);// Listen for timeline interactions from other users\nuseEffect(()=>{const cleanup=onTimelineInteraction(data=>{console.log(`üéØ ${data.user.username} interacted with ${data.work_order_number}`);setUserInteractions(prev=>{const newMap=new Map(prev);newMap.set(data.user.user_id,{username:data.user.username,work_order_id:data.work_order_id,work_order_number:data.work_order_number,timestamp:data.timestamp,type:'work_order_select'});return newMap;});// Clear interaction after 5 seconds\nsetTimeout(()=>{setUserInteractions(prev=>{const newMap=new Map(prev);newMap.delete(data.user.user_id);return newMap;});},5000);});return cleanup;},[onTimelineInteraction]);// Listen for real-time work order updates (from both SSE and Socket.IO)\nuseEffect(()=>{const cleanup=onWorkOrderUpdate(update=>{console.log('üì° Received work order update:',update);// Update the work order in our local state\nsetWorkOrders(prevOrders=>{return prevOrders.map(wo=>{if(wo.id===update.work_order.id){return{...wo,status:update.work_order.status,// Update other fields if available in the update\ncustomer_name:update.work_order.customer_name||wo.customer_name,assembly_number:update.work_order.assembly_number||wo.assembly_number,line_name:update.work_order.line_name||wo.line_name,quantity:update.work_order.quantity||wo.quantity,trolley_number:update.work_order.trolley_number||wo.trolley_number};}return wo;});});// Update last updated timestamp\nsetLastUpdated(new Date().toLocaleTimeString());// Show a brief notification (you could make this more sophisticated)\nconsole.log(`‚úÖ Updated ${update.work_order.work_order_number}: ${update.status_change.old_status} ‚Üí ${update.status_change.new_status}`);});return cleanup;},[onWorkOrderUpdate]);useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{setLoading(true);const baseUrl=process.env.NODE_ENV==='production'?window.location.origin:'https://smtdatabase01-production.up.railway.app';const token=localStorage.getItem('auth_token');const[timelineResponse,linesResponse]=await Promise.all([fetch(`${baseUrl}/api/schedule/timeline`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}}),fetch(`${baseUrl}/api/production-lines`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}})]);if(!timelineResponse.ok||!linesResponse.ok){throw new Error('Failed to fetch data');}const timelineData=await timelineResponse.json();const linesData=await linesResponse.json();setWorkOrders(timelineData.work_orders||[]);setProductionLines(linesData.production_lines||[]);}catch(err){setError(err instanceof Error?err.message:'An error occurred');}finally{setLoading(false);}};const getStatusColor=status=>{switch(status){case'1st Side Ready':return'bg-sy-gold-500 text-sy-black-900';case'Ready':return'bg-sy-green-500 text-white';case'Ready*':return'bg-sy-green-400 text-sy-black-900';case'Missing TSM-125-01-L-DV':return'bg-red-500 text-white';default:return'bg-gray-400 text-white';}};const formatDate=dateString=>{if(!dateString)return'Not scheduled';return new Date(dateString).toLocaleDateString('en-US',{month:'short',day:'numeric'});};const formatDuration=hours=>{if(hours<24){return`${hours.toFixed(1)}h`;}const days=Math.floor(hours/8);// Assuming 8-hour work days\nconst remainingHours=hours%8;return remainingHours>0?`${days}d ${remainingHours.toFixed(1)}h`:`${days}d`;};const groupWorkOrdersByLine=()=>{const grouped={};// Initialize with all active lines\nproductionLines.filter(line=>line.active).forEach(line=>{grouped[line.line_name]=[];});// Add unassigned work orders\ngrouped['Unassigned']=[];// Group work orders\nworkOrders.forEach(wo=>{const lineName=wo.line_name||'Unassigned';if(grouped[lineName]){grouped[lineName].push(wo);}else{grouped[lineName]=[wo];}});return grouped;};// Handle work order selection\nconst handleWorkOrderSelect=(workOrderId,workOrderNumber)=>{setSelectedWorkOrder(workOrderId);// Broadcast selection to other users\nsendTimelineInteraction('work_order_select',workOrderId,workOrderNumber);// Clear selection after 3 seconds\nsetTimeout(()=>{setSelectedWorkOrder(null);},3000);};// Handle status change from dropdown\nconst handleStatusChange=async(workOrderId,newStatus)=>{try{setStatusUpdateError(null);const baseUrl=process.env.NODE_ENV==='production'?window.location.origin:'http://localhost:8080';const response=await fetch(`${baseUrl}/api/timeline/work-orders/${workOrderId}/status`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('auth_token')}`},body:JSON.stringify({status:newStatus})});if(!response.ok){var _errorData$error;const errorData=await response.json();// Handle token expiration by redirecting to login\nif(response.status===401&&(_errorData$error=errorData.error)!==null&&_errorData$error!==void 0&&_errorData$error.includes('token')){console.warn('Token expired, redirecting to login...');localStorage.removeItem('auth_token');window.location.href='/login';return;}throw new Error(errorData.error||'Failed to update status');}const result=await response.json();// Update local state immediately for better UX\nsetWorkOrders(prevOrders=>prevOrders.map(wo=>wo.id===workOrderId?{...wo,status:newStatus}:wo));// Clear any previous error\nsetStatusUpdateError(null);console.log('Status updated successfully:',result);}catch(error){console.error('Failed to update status:',error);setStatusUpdateError(error instanceof Error?error.message:'Failed to update status');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-sy-black-50 flex items-center justify-center py-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-700\",children:\"Loading timeline...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-sy-black-50 flex items-center justify-center py-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-12 w-12 text-red-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900 mb-2\",children:\"Error Loading Timeline\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-600 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchData,className:\"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\",children:\"Try Again\"})]})});}const groupedWorkOrders=groupWorkOrdersByLine();return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-sy-black-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sm:flex sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold leading-tight tracking-tight text-sy-black-900\",children:\"Production Timeline\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-sy-black-600\",children:[\"Real-time view of work orders across all production lines\",lastUpdated&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-sy-green-600\",children:[\"\\u2022 Last updated: \",lastUpdated]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 sm:mt-0 flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/scan'),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-sy-green-600 hover:bg-sy-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500 transition-colors\",children:[/*#__PURE__*/_jsx(QrCodeIcon,{className:\"h-4 w-4 mr-2\"}),\"QR Scanner\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`h-2 w-2 rounded-full ${connected?'bg-green-500':'bg-red-500'}`}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-sy-black-600\",children:connected?'Live Updates':'Offline'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"weeks\",className:\"text-sm font-medium text-sy-black-700\",children:\"View:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"weeks\",value:selectedWeeks,onChange:e=>setSelectedWeeks(Number(e.target.value)),className:\"rounded-md border border-sy-black-300 py-1 px-3 text-sm focus:border-sy-green-500 focus:outline-none focus:ring-1 focus:ring-sy-green-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1 Week\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2 Weeks\"}),/*#__PURE__*/_jsx(\"option\",{value:4,children:\"4 Weeks\"}),/*#__PURE__*/_jsx(\"option\",{value:8,children:\"8 Weeks\"})]})]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:\"Schedule Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-sy-black-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-4 w-4 mr-1\"}),workOrders.length,\" work orders\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 mr-1\"}),productionLines.filter(l=>l.active).length,\" active lines\"]})]})]}),statusUpdateError&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Status Update Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mt-1\",children:statusUpdateError}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStatusUpdateError(null),className:\"text-sm text-red-600 hover:text-red-500 mt-2 underline\",children:\"Dismiss\"})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:Object.entries(groupedWorkOrders).map(_ref=>{var _productionLines$find;let[lineName,orders]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 last:mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-sy-black-900\",children:[lineName,lineName!=='Unassigned'&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm text-sy-black-600\",children:[\"(\",(_productionLines$find=productionLines.find(l=>l.line_name===lineName))===null||_productionLines$find===void 0?void 0:_productionLines$find.time_multiplier,\"x multiplier)\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-sy-black-600\",children:[orders.length,\" work orders\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:orders.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-sy-black-500\",children:\"No work orders scheduled for this line\"},`empty-${lineName}`):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-12 gap-4 px-4 py-2 text-xs font-medium text-sy-black-500 uppercase tracking-wider border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 text-center\",children:\"#\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-3\",children:\"Work Order & Customer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 text-center\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 text-center\",children:\"Ship Date\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 text-center\",children:\"QR Code\"})]}),orders.map((wo,index)=>{const isSelected=selectedWorkOrder===wo.id;const hasUserInteraction=Array.from(userInteractions.values()).some(interaction=>interaction.work_order_id===wo.id);const interactingUser=Array.from(userInteractions.values()).find(interaction=>interaction.work_order_id===wo.id);return/*#__PURE__*/_jsxs(\"div\",{className:`grid grid-cols-12 gap-4 p-4 rounded-lg border transition-all cursor-pointer relative ${isSelected?'bg-blue-100 border-blue-300 shadow-md':hasUserInteraction?'bg-amber-50 border-amber-300':'bg-sy-black-50 border-gray-200 hover:border-sy-green-300'} items-center`,onClick:()=>handleWorkOrderSelect(wo.id,wo.work_order_number),children:[hasUserInteraction&&interactingUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -top-2 -right-2 bg-amber-500 text-white text-xs px-2 py-1 rounded-full shadow-md\",children:[\"\\uD83D\\uDC41\\uFE0F \",interactingUser.username]}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 -left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full shadow-md\",children:\"\\u2713 Selected\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-sy-black-700\",children:[\"#\",index+1]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-sy-black-900\",children:[\"WO \",wo.work_order_number,\"-\",wo.line_number||1]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-sy-black-600 truncate\",children:[wo.customer_name,\" - \",wo.assembly_number]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2\",children:user&&['admin','scheduler','supervisor'].includes(user.role)?/*#__PURE__*/_jsx(StatusDropdown,{currentStatus:wo.status,workOrderId:wo.id,workOrderNumber:wo.work_order_number,onStatusChange:handleStatusChange}):/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(wo.status)}`,children:wo.status})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-sy-black-900\",children:wo.quantity.toLocaleString()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-sy-black-600\",children:formatDuration(wo.total_duration_hours)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-sy-black-900\",children:formatDate(wo.ship_date)}),wo.trolley_number&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-sy-black-600\",children:[\"Trolley \",wo.trolley_number]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 text-center\",children:wo.qr_code?/*#__PURE__*/_jsx(QRCodeDisplay,{qrCode:wo.qr_code,workOrderNumber:wo.work_order_number,lineNumber:wo.line_number,size:64,showLabel:false,className:\"mx-auto\"}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:\"No QR Code\"})})]},`${lineName}-${wo.id||wo.work_order_number}-${index}`);})]})})]},`line-${lineName}`);})})]})})]});};export default TimelineView;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Clock","Users","AlertTriangle","QrCodeIcon","useSocket","useAuth","StatusDropdown","QRCodeDisplay","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TimelineView","navigate","workOrders","setWorkOrders","productionLines","setProductionLines","loading","setLoading","error","setError","selectedWeeks","setSelectedWeeks","lastUpdated","setLastUpdated","selectedWorkOrder","setSelectedWorkOrder","userInteractions","setUserInteractions","Map","statusUpdateError","setStatusUpdateError","user","connected","socketConnected","onWorkOrderUpdate","joinRooms","roomUsers","userCount","onUserJoinedRoom","onUserLeftRoom","onTimelineInteraction","sendTimelineInteraction","getRoomUsers","setTimeout","cleanupJoined","data","console","log","username","cleanupLeft","prev","newMap","delete","user_id","cleanup","work_order_number","set","work_order_id","timestamp","type","update","prevOrders","map","wo","id","work_order","status","customer_name","assembly_number","line_name","quantity","trolley_number","Date","toLocaleTimeString","status_change","old_status","new_status","fetchData","baseUrl","process","env","NODE_ENV","window","location","origin","token","localStorage","getItem","timelineResponse","linesResponse","Promise","all","fetch","headers","ok","Error","timelineData","json","linesData","work_orders","production_lines","err","message","getStatusColor","formatDate","dateString","toLocaleDateString","month","day","formatDuration","hours","toFixed","days","Math","floor","remainingHours","groupWorkOrdersByLine","grouped","filter","line","active","forEach","lineName","push","handleWorkOrderSelect","workOrderId","workOrderNumber","handleStatusChange","newStatus","response","method","body","JSON","stringify","_errorData$error","errorData","includes","warn","removeItem","href","result","className","children","onClick","groupedWorkOrders","htmlFor","value","onChange","e","Number","target","length","l","Object","entries","_ref","_productionLines$find","orders","find","time_multiplier","index","isSelected","hasUserInteraction","Array","from","values","some","interaction","interactingUser","line_number","role","currentStatus","onStatusChange","toLocaleString","total_duration_hours","ship_date","qr_code","qrCode","lineNumber","size","showLabel"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/pages/TimelineView.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Clock, Users, AlertTriangle, RefreshCcwIcon, QrCodeIcon } from 'lucide-react';\nimport { useSocket } from '../contexts/SocketContext.tsx';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport StatusDropdown from '../components/StatusDropdown.tsx';\nimport QRCodeDisplay from '../components/QRCodeDisplay.tsx';\n\ninterface WorkOrder {\n  id: string;\n  work_order_number: string;\n  line_number?: number | null;\n  qr_code?: string | null;\n  customer_name: string;\n  assembly_number: string;\n  revision: string;\n  quantity: number;\n  status: string;\n  kit_date: string | null;\n  ship_date: string | null;\n  setup_hours_estimated: number;\n  production_hours_estimated: number;\n  total_duration_hours: number;\n  trolley_number: number | null;\n  line_id: string | null;\n  line_name: string | null;\n  time_multiplier: number;\n  line_position: number | null;\n  scheduled_start_time: string | null;\n  scheduled_end_time: string | null;\n}\n\ninterface ProductionLine {\n  id: string;\n  line_name: string;\n  time_multiplier: number;\n  active: boolean;\n}\n\nconst TimelineView: React.FC = () => {\n  const navigate = useNavigate();\n  const [workOrders, setWorkOrders] = useState<WorkOrder[]>([]);\n  const [productionLines, setProductionLines] = useState<ProductionLine[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedWeeks, setSelectedWeeks] = useState(4);\n  const [lastUpdated, setLastUpdated] = useState<string>('');\n  const [selectedWorkOrder, setSelectedWorkOrder] = useState<string | null>(null);\n  const [userInteractions, setUserInteractions] = useState<Map<string, any>>(new Map());\n  const [statusUpdateError, setStatusUpdateError] = useState<string | null>(null);\n  \n  const { user } = useAuth();\n  const { \n    connected, \n    socketConnected, \n    onWorkOrderUpdate, \n    joinRooms, \n    roomUsers, \n    userCount,\n    onUserJoinedRoom,\n    onUserLeftRoom,\n    onTimelineInteraction,\n    sendTimelineInteraction,\n    getRoomUsers\n  } = useSocket();\n\n  // Join Socket.IO room for real-time timeline updates\n  useEffect(() => {\n    if (socketConnected) {\n      joinRooms(['timeline']);\n      // Get current room users\n      setTimeout(() => getRoomUsers('timeline'), 500);\n    }\n  }, [socketConnected, joinRooms, getRoomUsers]);\n\n  // Listen for user presence changes\n  useEffect(() => {\n    const cleanupJoined = onUserJoinedRoom((data) => {\n      console.log(`üëã ${data.user.username} joined the timeline view`);\n      // Could show a notification here\n    });\n\n    const cleanupLeft = onUserLeftRoom((data) => {\n      console.log(`üëã ${data.user.username} left the timeline view`);\n      // Clear any interactions from this user\n      setUserInteractions(prev => {\n        const newMap = new Map(prev);\n        newMap.delete(data.user.user_id);\n        return newMap;\n      });\n    });\n\n    return () => {\n      cleanupJoined();\n      cleanupLeft();\n    };\n  }, [onUserJoinedRoom, onUserLeftRoom]);\n\n  // Listen for timeline interactions from other users\n  useEffect(() => {\n    const cleanup = onTimelineInteraction((data) => {\n      console.log(`üéØ ${data.user.username} interacted with ${data.work_order_number}`);\n      \n      setUserInteractions(prev => {\n        const newMap = new Map(prev);\n        newMap.set(data.user.user_id, {\n          username: data.user.username,\n          work_order_id: data.work_order_id,\n          work_order_number: data.work_order_number,\n          timestamp: data.timestamp,\n          type: 'work_order_select'\n        });\n        return newMap;\n      });\n\n      // Clear interaction after 5 seconds\n      setTimeout(() => {\n        setUserInteractions(prev => {\n          const newMap = new Map(prev);\n          newMap.delete(data.user.user_id);\n          return newMap;\n        });\n      }, 5000);\n    });\n\n    return cleanup;\n  }, [onTimelineInteraction]);\n\n  // Listen for real-time work order updates (from both SSE and Socket.IO)\n  useEffect(() => {\n    const cleanup = onWorkOrderUpdate((update) => {\n      console.log('üì° Received work order update:', update);\n      \n      // Update the work order in our local state\n      setWorkOrders(prevOrders => {\n        return prevOrders.map(wo => {\n          if (wo.id === update.work_order.id) {\n            return {\n              ...wo,\n              status: update.work_order.status,\n              // Update other fields if available in the update\n              customer_name: update.work_order.customer_name || wo.customer_name,\n              assembly_number: update.work_order.assembly_number || wo.assembly_number,\n              line_name: update.work_order.line_name || wo.line_name,\n              quantity: update.work_order.quantity || wo.quantity,\n              trolley_number: update.work_order.trolley_number || wo.trolley_number\n            };\n          }\n          return wo;\n        });\n      });\n\n      // Update last updated timestamp\n      setLastUpdated(new Date().toLocaleTimeString());\n      \n      // Show a brief notification (you could make this more sophisticated)\n      console.log(`‚úÖ Updated ${update.work_order.work_order_number}: ${update.status_change.old_status} ‚Üí ${update.status_change.new_status}`);\n    });\n\n    return cleanup;\n  }, [onWorkOrderUpdate]);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const baseUrl = process.env.NODE_ENV === 'production' \n        ? window.location.origin \n        : 'https://smtdatabase01-production.up.railway.app';\n      const token = localStorage.getItem('auth_token');\n      const [timelineResponse, linesResponse] = await Promise.all([\n        fetch(`${baseUrl}/api/schedule/timeline`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        }),\n        fetch(`${baseUrl}/api/production-lines`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        })\n      ]);\n\n      if (!timelineResponse.ok || !linesResponse.ok) {\n        throw new Error('Failed to fetch data');\n      }\n\n      const timelineData = await timelineResponse.json();\n      const linesData = await linesResponse.json();\n\n      setWorkOrders(timelineData.work_orders || []);\n      setProductionLines(linesData.production_lines || []);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case '1st Side Ready': return 'bg-sy-gold-500 text-sy-black-900';\n      case 'Ready': return 'bg-sy-green-500 text-white';\n      case 'Ready*': return 'bg-sy-green-400 text-sy-black-900';\n      case 'Missing TSM-125-01-L-DV': return 'bg-red-500 text-white';\n      default: return 'bg-gray-400 text-white';\n    }\n  };\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return 'Not scheduled';\n    return new Date(dateString).toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n  };\n\n  const formatDuration = (hours: number) => {\n    if (hours < 24) {\n      return `${hours.toFixed(1)}h`;\n    }\n    const days = Math.floor(hours / 8); // Assuming 8-hour work days\n    const remainingHours = hours % 8;\n    return remainingHours > 0 ? `${days}d ${remainingHours.toFixed(1)}h` : `${days}d`;\n  };\n\n  const groupWorkOrdersByLine = () => {\n    const grouped: { [key: string]: WorkOrder[] } = {};\n    \n    // Initialize with all active lines\n    productionLines.filter(line => line.active).forEach(line => {\n      grouped[line.line_name] = [];\n    });\n\n    // Add unassigned work orders\n    grouped['Unassigned'] = [];\n\n    // Group work orders\n    workOrders.forEach(wo => {\n      const lineName = wo.line_name || 'Unassigned';\n      if (grouped[lineName]) {\n        grouped[lineName].push(wo);\n      } else {\n        grouped[lineName] = [wo];\n      }\n    });\n\n    return grouped;\n  };\n\n  // Handle work order selection\n  const handleWorkOrderSelect = (workOrderId: string, workOrderNumber: string) => {\n    setSelectedWorkOrder(workOrderId);\n    \n    // Broadcast selection to other users\n    sendTimelineInteraction('work_order_select', workOrderId, workOrderNumber);\n    \n    // Clear selection after 3 seconds\n    setTimeout(() => {\n      setSelectedWorkOrder(null);\n    }, 3000);\n  };\n\n  // Handle status change from dropdown\n  const handleStatusChange = async (workOrderId: string, newStatus: string) => {\n    try {\n      setStatusUpdateError(null);\n      \n          const baseUrl = process.env.NODE_ENV === 'production' \n        ? window.location.origin\n        : 'http://localhost:8080';\n      \n      const response = await fetch(`${baseUrl}/api/timeline/work-orders/${workOrderId}/status`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n        },\n        body: JSON.stringify({ status: newStatus })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        \n        // Handle token expiration by redirecting to login\n        if (response.status === 401 && errorData.error?.includes('token')) {\n          console.warn('Token expired, redirecting to login...');\n          localStorage.removeItem('auth_token');\n          window.location.href = '/login';\n          return;\n        }\n        \n        throw new Error(errorData.error || 'Failed to update status');\n      }\n\n      const result = await response.json();\n      \n      // Update local state immediately for better UX\n      setWorkOrders(prevOrders => \n        prevOrders.map(wo => \n          wo.id === workOrderId \n            ? { ...wo, status: newStatus }\n            : wo\n        )\n      );\n\n      // Clear any previous error\n      setStatusUpdateError(null);\n      \n      console.log('Status updated successfully:', result);\n\n    } catch (error) {\n      console.error('Failed to update status:', error);\n      setStatusUpdateError(error instanceof Error ? error.message : 'Failed to update status');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-sy-black-50 flex items-center justify-center py-20\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"></div>\n          <span className=\"text-sy-black-700\">Loading timeline...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-sy-black-50 flex items-center justify-center py-20\">\n        <div className=\"text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-sy-black-900 mb-2\">Error Loading Timeline</h3>\n          <p className=\"text-sy-black-600 mb-4\">{error}</p>\n          <button\n            onClick={fetchData}\n            className=\"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const groupedWorkOrders = groupWorkOrdersByLine();\n\n  return (\n    <div className=\"bg-sy-black-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"py-6\">\n            <div className=\"sm:flex sm:items-center sm:justify-between\">\n              <div>\n                <h1 className=\"text-2xl font-bold leading-tight tracking-tight text-sy-black-900\">\n                  Production Timeline\n                </h1>\n                <p className=\"mt-1 text-sm text-sy-black-600\">\n                  Real-time view of work orders across all production lines\n                  {lastUpdated && (\n                    <span className=\"ml-2 text-xs text-sy-green-600\">\n                      ‚Ä¢ Last updated: {lastUpdated}\n                    </span>\n                  )}\n                </p>\n              </div>\n              <div className=\"mt-4 sm:mt-0 flex items-center space-x-4\">\n                {/* QR Scanner Button */}\n                <button\n                  onClick={() => navigate('/scan')}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-sy-green-600 hover:bg-sy-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500 transition-colors\"\n                >\n                  <QrCodeIcon className=\"h-4 w-4 mr-2\" />\n                  QR Scanner\n                </button>\n                \n                {/* Real-time Status */}\n                <div className=\"flex items-center space-x-2\">\n                  <div className={`h-2 w-2 rounded-full ${connected ? 'bg-green-500' : 'bg-red-500'}`}></div>\n                  <span className=\"text-xs text-sy-black-600\">\n                    {connected ? 'Live Updates' : 'Offline'}\n                  </span>\n                </div>\n                \n                {/* Week selector */}\n                <div className=\"flex items-center space-x-2\">\n                  <label htmlFor=\"weeks\" className=\"text-sm font-medium text-sy-black-700\">\n                    View:\n                  </label>\n                  <select\n                    id=\"weeks\"\n                    value={selectedWeeks}\n                    onChange={(e) => setSelectedWeeks(Number(e.target.value))}\n                    className=\"rounded-md border border-sy-black-300 py-1 px-3 text-sm focus:border-sy-green-500 focus:outline-none focus:ring-1 focus:ring-sy-green-500\"\n                  >\n                    <option value={1}>1 Week</option>\n                    <option value={2}>2 Weeks</option>\n                    <option value={4}>4 Weeks</option>\n                    <option value={8}>8 Weeks</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Timeline Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-sy-black-900\">\n                Schedule Overview\n              </h3>\n              <div className=\"flex items-center space-x-4 text-sm text-sy-black-600\">\n                <div className=\"flex items-center\">\n                  <Users className=\"h-4 w-4 mr-1\" />\n                  {workOrders.length} work orders\n                </div>\n                <div className=\"flex items-center\">\n                  <Clock className=\"h-4 w-4 mr-1\" />\n                  {productionLines.filter(l => l.active).length} active lines\n                </div>\n              </div>\n            </div>\n            \n            {/* Status Update Error */}\n            {statusUpdateError && (\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n                <div className=\"flex\">\n                  <AlertTriangle className=\"h-5 w-5 text-red-400\" />\n                  <div className=\"ml-3\">\n                    <h3 className=\"text-sm font-medium text-red-800\">\n                      Status Update Failed\n                    </h3>\n                    <p className=\"text-sm text-red-700 mt-1\">\n                      {statusUpdateError}\n                    </p>\n                    <button\n                      onClick={() => setStatusUpdateError(null)}\n                      className=\"text-sm text-red-600 hover:text-red-500 mt-2 underline\"\n                    >\n                      Dismiss\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"p-6\">\n            {Object.entries(groupedWorkOrders).map(([lineName, orders]) => (\n              <div key={`line-${lineName}`} className=\"mb-8 last:mb-0\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h4 className=\"text-lg font-semibold text-sy-black-900\">\n                    {lineName}\n                    {lineName !== 'Unassigned' && (\n                      <span className=\"ml-2 text-sm text-sy-black-600\">\n                        ({productionLines.find(l => l.line_name === lineName)?.time_multiplier}x multiplier)\n                      </span>\n                    )}\n                  </h4>\n                  <span className=\"text-sm text-sy-black-600\">\n                    {orders.length} work orders\n                  </span>\n                </div>\n\n                <div className=\"space-y-2\">\n                  {orders.length === 0 ? (\n                    <div key={`empty-${lineName}`} className=\"text-center py-8 text-sy-black-500\">\n                      No work orders scheduled for this line\n                    </div>\n                  ) : (\n                    <>\n                      {/* Column Headers */}\n                      <div className=\"grid grid-cols-12 gap-4 px-4 py-2 text-xs font-medium text-sy-black-500 uppercase tracking-wider border-b border-gray-200\">\n                        <div className=\"col-span-1 text-center\">#</div>\n                        <div className=\"col-span-3\">Work Order & Customer</div>\n                        <div className=\"col-span-2\">Status</div>\n                        <div className=\"col-span-2 text-center\">Quantity</div>\n                        <div className=\"col-span-2 text-center\">Ship Date</div>\n                        <div className=\"col-span-1 text-center\">QR Code</div>\n                      </div>\n                      {orders.map((wo, index) => {\n                        const isSelected = selectedWorkOrder === wo.id;\n                        const hasUserInteraction = Array.from(userInteractions.values()).some(\n                          interaction => interaction.work_order_id === wo.id\n                        );\n                        const interactingUser = Array.from(userInteractions.values()).find(\n                          interaction => interaction.work_order_id === wo.id\n                        );\n\n                        return (\n                          <div\n                            key={`${lineName}-${wo.id || wo.work_order_number}-${index}`}\n                            className={`grid grid-cols-12 gap-4 p-4 rounded-lg border transition-all cursor-pointer relative ${\n                              isSelected \n                                ? 'bg-blue-100 border-blue-300 shadow-md' \n                                : hasUserInteraction\n                                ? 'bg-amber-50 border-amber-300'\n                                : 'bg-sy-black-50 border-gray-200 hover:border-sy-green-300'\n                            } items-center`}\n                            onClick={() => handleWorkOrderSelect(wo.id, wo.work_order_number)}\n                          >\n                            {/* User Interaction Indicator */}\n                            {hasUserInteraction && interactingUser && (\n                              <div className=\"absolute -top-2 -right-2 bg-amber-500 text-white text-xs px-2 py-1 rounded-full shadow-md\">\n                                üëÅÔ∏è {interactingUser.username}\n                              </div>\n                            )}\n\n                            {/* Selection Indicator */}\n                            {isSelected && (\n                              <div className=\"absolute -top-2 -left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full shadow-md\">\n                                ‚úì Selected\n                              </div>\n                            )}\n\n                            {/* Position */}\n                            <div className=\"col-span-1 text-center\">\n                              <span className=\"text-sm font-medium text-sy-black-700\">\n                                #{index + 1}\n                              </span>\n                            </div>\n                            \n                            {/* Work Order Info */}\n                            <div className=\"col-span-3\">\n                              <p className=\"text-sm font-medium text-sy-black-900\">\n                                WO {wo.work_order_number}-{wo.line_number || 1}\n                              </p>\n                              <p className=\"text-sm text-sy-black-600 truncate\">\n                                {wo.customer_name} - {wo.assembly_number}\n                              </p>\n                            </div>\n                        \n                        {/* Status */}\n                        <div className=\"col-span-2\">\n                          {user && ['admin', 'scheduler', 'supervisor'].includes(user.role) ? (\n                            <StatusDropdown\n                              currentStatus={wo.status}\n                              workOrderId={wo.id}\n                              workOrderNumber={wo.work_order_number}\n                              onStatusChange={handleStatusChange}\n                            />\n                          ) : (\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(wo.status)}`}>\n                              {wo.status}\n                            </span>\n                          )}\n                        </div>\n\n                        {/* Quantity */}\n                        <div className=\"col-span-2 text-center\">\n                          <p className=\"text-sm font-medium text-sy-black-900\">\n                            {wo.quantity.toLocaleString()}\n                          </p>\n                          <p className=\"text-sm text-sy-black-600\">\n                            {formatDuration(wo.total_duration_hours)}\n                          </p>\n                        </div>\n\n                        {/* Ship Date */}\n                        <div className=\"col-span-2 text-center\">\n                          <p className=\"text-sm font-medium text-sy-black-900\">\n                            {formatDate(wo.ship_date)}\n                          </p>\n                          {wo.trolley_number && (\n                            <p className=\"text-sm text-sy-black-600\">\n                              Trolley {wo.trolley_number}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* QR Code */}\n                        <div className=\"col-span-1 text-center\">\n                          {wo.qr_code ? (\n                            <QRCodeDisplay\n                              qrCode={wo.qr_code}\n                              workOrderNumber={wo.work_order_number}\n                              lineNumber={wo.line_number}\n                              size={64}\n                              showLabel={false}\n                              className=\"mx-auto\"\n                            />\n                          ) : (\n                            <div className=\"text-xs text-gray-400\">\n                              No QR Code\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                        );\n                      })}\n                    </>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TimelineView; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAA6B,OAAO,CACvE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,CAAEC,KAAK,CAAEC,aAAa,CAAkBC,UAAU,KAAQ,cAAc,CACtF,OAASC,SAAS,KAAQ,+BAA+B,CACzD,OAASC,OAAO,KAAQ,6BAA6B,CACrD,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAiC5D,KAAM,CAAAC,YAAsB,CAAGA,CAAA,GAAM,CACnC,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAc,EAAE,CAAC,CAC7D,KAAM,CAACqB,eAAe,CAAEC,kBAAkB,CAAC,CAAGtB,QAAQ,CAAmB,EAAE,CAAC,CAC5E,KAAM,CAACuB,OAAO,CAAEC,UAAU,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyB,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAC2B,aAAa,CAAEC,gBAAgB,CAAC,CAAG5B,QAAQ,CAAC,CAAC,CAAC,CACrD,KAAM,CAAC6B,WAAW,CAAEC,cAAc,CAAC,CAAG9B,QAAQ,CAAS,EAAE,CAAC,CAC1D,KAAM,CAAC+B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGhC,QAAQ,CAAgB,IAAI,CAAC,CAC/E,KAAM,CAACiC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGlC,QAAQ,CAAmB,GAAI,CAAAmC,GAAG,CAAC,CAAC,CAAC,CACrF,KAAM,CAACC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGrC,QAAQ,CAAgB,IAAI,CAAC,CAE/E,KAAM,CAAEsC,IAAK,CAAC,CAAG9B,OAAO,CAAC,CAAC,CAC1B,KAAM,CACJ+B,SAAS,CACTC,eAAe,CACfC,iBAAiB,CACjBC,SAAS,CACTC,SAAS,CACTC,SAAS,CACTC,gBAAgB,CAChBC,cAAc,CACdC,qBAAqB,CACrBC,uBAAuB,CACvBC,YACF,CAAC,CAAG1C,SAAS,CAAC,CAAC,CAEf;AACAN,SAAS,CAAC,IAAM,CACd,GAAIuC,eAAe,CAAE,CACnBE,SAAS,CAAC,CAAC,UAAU,CAAC,CAAC,CACvB;AACAQ,UAAU,CAAC,IAAMD,YAAY,CAAC,UAAU,CAAC,CAAE,GAAG,CAAC,CACjD,CACF,CAAC,CAAE,CAACT,eAAe,CAAEE,SAAS,CAAEO,YAAY,CAAC,CAAC,CAE9C;AACAhD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkD,aAAa,CAAGN,gBAAgB,CAAEO,IAAI,EAAK,CAC/CC,OAAO,CAACC,GAAG,CAAC,MAAMF,IAAI,CAACd,IAAI,CAACiB,QAAQ,2BAA2B,CAAC,CAChE;AACF,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,CAAGV,cAAc,CAAEM,IAAI,EAAK,CAC3CC,OAAO,CAACC,GAAG,CAAC,MAAMF,IAAI,CAACd,IAAI,CAACiB,QAAQ,yBAAyB,CAAC,CAC9D;AACArB,mBAAmB,CAACuB,IAAI,EAAI,CAC1B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAvB,GAAG,CAACsB,IAAI,CAAC,CAC5BC,MAAM,CAACC,MAAM,CAACP,IAAI,CAACd,IAAI,CAACsB,OAAO,CAAC,CAChC,MAAO,CAAAF,MAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,IAAM,CACXP,aAAa,CAAC,CAAC,CACfK,WAAW,CAAC,CAAC,CACf,CAAC,CACH,CAAC,CAAE,CAACX,gBAAgB,CAAEC,cAAc,CAAC,CAAC,CAEtC;AACA7C,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4D,OAAO,CAAGd,qBAAqB,CAAEK,IAAI,EAAK,CAC9CC,OAAO,CAACC,GAAG,CAAC,MAAMF,IAAI,CAACd,IAAI,CAACiB,QAAQ,oBAAoBH,IAAI,CAACU,iBAAiB,EAAE,CAAC,CAEjF5B,mBAAmB,CAACuB,IAAI,EAAI,CAC1B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAvB,GAAG,CAACsB,IAAI,CAAC,CAC5BC,MAAM,CAACK,GAAG,CAACX,IAAI,CAACd,IAAI,CAACsB,OAAO,CAAE,CAC5BL,QAAQ,CAAEH,IAAI,CAACd,IAAI,CAACiB,QAAQ,CAC5BS,aAAa,CAAEZ,IAAI,CAACY,aAAa,CACjCF,iBAAiB,CAAEV,IAAI,CAACU,iBAAiB,CACzCG,SAAS,CAAEb,IAAI,CAACa,SAAS,CACzBC,IAAI,CAAE,mBACR,CAAC,CAAC,CACF,MAAO,CAAAR,MAAM,CACf,CAAC,CAAC,CAEF;AACAR,UAAU,CAAC,IAAM,CACfhB,mBAAmB,CAACuB,IAAI,EAAI,CAC1B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAvB,GAAG,CAACsB,IAAI,CAAC,CAC5BC,MAAM,CAACC,MAAM,CAACP,IAAI,CAACd,IAAI,CAACsB,OAAO,CAAC,CAChC,MAAO,CAAAF,MAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CAEF,MAAO,CAAAG,OAAO,CAChB,CAAC,CAAE,CAACd,qBAAqB,CAAC,CAAC,CAE3B;AACA9C,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4D,OAAO,CAAGpB,iBAAiB,CAAE0B,MAAM,EAAK,CAC5Cd,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEa,MAAM,CAAC,CAErD;AACA/C,aAAa,CAACgD,UAAU,EAAI,CAC1B,MAAO,CAAAA,UAAU,CAACC,GAAG,CAACC,EAAE,EAAI,CAC1B,GAAIA,EAAE,CAACC,EAAE,GAAKJ,MAAM,CAACK,UAAU,CAACD,EAAE,CAAE,CAClC,MAAO,CACL,GAAGD,EAAE,CACLG,MAAM,CAAEN,MAAM,CAACK,UAAU,CAACC,MAAM,CAChC;AACAC,aAAa,CAAEP,MAAM,CAACK,UAAU,CAACE,aAAa,EAAIJ,EAAE,CAACI,aAAa,CAClEC,eAAe,CAAER,MAAM,CAACK,UAAU,CAACG,eAAe,EAAIL,EAAE,CAACK,eAAe,CACxEC,SAAS,CAAET,MAAM,CAACK,UAAU,CAACI,SAAS,EAAIN,EAAE,CAACM,SAAS,CACtDC,QAAQ,CAAEV,MAAM,CAACK,UAAU,CAACK,QAAQ,EAAIP,EAAE,CAACO,QAAQ,CACnDC,cAAc,CAAEX,MAAM,CAACK,UAAU,CAACM,cAAc,EAAIR,EAAE,CAACQ,cACzD,CAAC,CACH,CACA,MAAO,CAAAR,EAAE,CACX,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF;AACAxC,cAAc,CAAC,GAAI,CAAAiD,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAC,CAE/C;AACA3B,OAAO,CAACC,GAAG,CAAC,aAAaa,MAAM,CAACK,UAAU,CAACV,iBAAiB,KAAKK,MAAM,CAACc,aAAa,CAACC,UAAU,MAAMf,MAAM,CAACc,aAAa,CAACE,UAAU,EAAE,CAAC,CAC1I,CAAC,CAAC,CAEF,MAAO,CAAAtB,OAAO,CAChB,CAAC,CAAE,CAACpB,iBAAiB,CAAC,CAAC,CAEvBxC,SAAS,CAAC,IAAM,CACdmF,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF5D,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAA6D,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CACjDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CACtB,iDAAiD,CACrD,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAChD,KAAM,CAACC,gBAAgB,CAAEC,aAAa,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAC1DC,KAAK,CAAC,GAAGd,OAAO,wBAAwB,CAAE,CACxCe,OAAO,CAAE,CACP,eAAe,CAAE,UAAUR,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACFO,KAAK,CAAC,GAAGd,OAAO,uBAAuB,CAAE,CACvCe,OAAO,CAAE,CACP,eAAe,CAAE,UAAUR,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACH,CAAC,CAEF,GAAI,CAACG,gBAAgB,CAACM,EAAE,EAAI,CAACL,aAAa,CAACK,EAAE,CAAE,CAC7C,KAAM,IAAI,CAAAC,KAAK,CAAC,sBAAsB,CAAC,CACzC,CAEA,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAR,gBAAgB,CAACS,IAAI,CAAC,CAAC,CAClD,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAT,aAAa,CAACQ,IAAI,CAAC,CAAC,CAE5CpF,aAAa,CAACmF,YAAY,CAACG,WAAW,EAAI,EAAE,CAAC,CAC7CpF,kBAAkB,CAACmF,SAAS,CAACE,gBAAgB,EAAI,EAAE,CAAC,CACtD,CAAE,MAAOC,GAAG,CAAE,CACZlF,QAAQ,CAACkF,GAAG,WAAY,CAAAN,KAAK,CAAGM,GAAG,CAACC,OAAO,CAAG,mBAAmB,CAAC,CACpE,CAAC,OAAS,CACRrF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAsF,cAAc,CAAIrC,MAAc,EAAK,CACzC,OAAQA,MAAM,EACZ,IAAK,gBAAgB,CAAE,MAAO,kCAAkC,CAChE,IAAK,OAAO,CAAE,MAAO,4BAA4B,CACjD,IAAK,QAAQ,CAAE,MAAO,mCAAmC,CACzD,IAAK,yBAAyB,CAAE,MAAO,uBAAuB,CAC9D,QAAS,MAAO,wBAAwB,CAC1C,CACF,CAAC,CAED,KAAM,CAAAsC,UAAU,CAAIC,UAAyB,EAAK,CAChD,GAAI,CAACA,UAAU,CAAE,MAAO,eAAe,CACvC,MAAO,IAAI,CAAAjC,IAAI,CAACiC,UAAU,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAE,CACtDC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,SACP,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,KAAa,EAAK,CACxC,GAAIA,KAAK,CAAG,EAAE,CAAE,CACd,MAAO,GAAGA,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,CAC/B,CACA,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAG,CAAC,CAAC,CAAE;AACpC,KAAM,CAAAK,cAAc,CAAGL,KAAK,CAAG,CAAC,CAChC,MAAO,CAAAK,cAAc,CAAG,CAAC,CAAG,GAAGH,IAAI,KAAKG,cAAc,CAACJ,OAAO,CAAC,CAAC,CAAC,GAAG,CAAG,GAAGC,IAAI,GAAG,CACnF,CAAC,CAED,KAAM,CAAAI,qBAAqB,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAAC,OAAuC,CAAG,CAAC,CAAC,CAElD;AACAvG,eAAe,CAACwG,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,MAAM,CAAC,CAACC,OAAO,CAACF,IAAI,EAAI,CAC1DF,OAAO,CAACE,IAAI,CAAClD,SAAS,CAAC,CAAG,EAAE,CAC9B,CAAC,CAAC,CAEF;AACAgD,OAAO,CAAC,YAAY,CAAC,CAAG,EAAE,CAE1B;AACAzG,UAAU,CAAC6G,OAAO,CAAC1D,EAAE,EAAI,CACvB,KAAM,CAAA2D,QAAQ,CAAG3D,EAAE,CAACM,SAAS,EAAI,YAAY,CAC7C,GAAIgD,OAAO,CAACK,QAAQ,CAAC,CAAE,CACrBL,OAAO,CAACK,QAAQ,CAAC,CAACC,IAAI,CAAC5D,EAAE,CAAC,CAC5B,CAAC,IAAM,CACLsD,OAAO,CAACK,QAAQ,CAAC,CAAG,CAAC3D,EAAE,CAAC,CAC1B,CACF,CAAC,CAAC,CAEF,MAAO,CAAAsD,OAAO,CAChB,CAAC,CAED;AACA,KAAM,CAAAO,qBAAqB,CAAGA,CAACC,WAAmB,CAAEC,eAAuB,GAAK,CAC9ErG,oBAAoB,CAACoG,WAAW,CAAC,CAEjC;AACApF,uBAAuB,CAAC,mBAAmB,CAAEoF,WAAW,CAAEC,eAAe,CAAC,CAE1E;AACAnF,UAAU,CAAC,IAAM,CACflB,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAED;AACA,KAAM,CAAAsG,kBAAkB,CAAG,KAAAA,CAAOF,WAAmB,CAAEG,SAAiB,GAAK,CAC3E,GAAI,CACFlG,oBAAoB,CAAC,IAAI,CAAC,CAEtB,KAAM,CAAAgD,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CACrDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CACtB,uBAAuB,CAE3B,KAAM,CAAA6C,QAAQ,CAAG,KAAM,CAAArC,KAAK,CAAC,GAAGd,OAAO,6BAA6B+C,WAAW,SAAS,CAAE,CACxFK,MAAM,CAAE,KAAK,CACbrC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUP,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,EAC/D,CAAC,CACD4C,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEnE,MAAM,CAAE8D,SAAU,CAAC,CAC5C,CAAC,CAAC,CAEF,GAAI,CAACC,QAAQ,CAACnC,EAAE,CAAE,KAAAwC,gBAAA,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAN,QAAQ,CAAChC,IAAI,CAAC,CAAC,CAEvC;AACA,GAAIgC,QAAQ,CAAC/D,MAAM,GAAK,GAAG,GAAAoE,gBAAA,CAAIC,SAAS,CAACrH,KAAK,UAAAoH,gBAAA,WAAfA,gBAAA,CAAiBE,QAAQ,CAAC,OAAO,CAAC,CAAE,CACjE1F,OAAO,CAAC2F,IAAI,CAAC,wCAAwC,CAAC,CACtDnD,YAAY,CAACoD,UAAU,CAAC,YAAY,CAAC,CACrCxD,MAAM,CAACC,QAAQ,CAACwD,IAAI,CAAG,QAAQ,CAC/B,OACF,CAEA,KAAM,IAAI,CAAA5C,KAAK,CAACwC,SAAS,CAACrH,KAAK,EAAI,yBAAyB,CAAC,CAC/D,CAEA,KAAM,CAAA0H,MAAM,CAAG,KAAM,CAAAX,QAAQ,CAAChC,IAAI,CAAC,CAAC,CAEpC;AACApF,aAAa,CAACgD,UAAU,EACtBA,UAAU,CAACC,GAAG,CAACC,EAAE,EACfA,EAAE,CAACC,EAAE,GAAK6D,WAAW,CACjB,CAAE,GAAG9D,EAAE,CAAEG,MAAM,CAAE8D,SAAU,CAAC,CAC5BjE,EACN,CACF,CAAC,CAED;AACAjC,oBAAoB,CAAC,IAAI,CAAC,CAE1BgB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAE6F,MAAM,CAAC,CAErD,CAAE,MAAO1H,KAAK,CAAE,CACd4B,OAAO,CAAC5B,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDY,oBAAoB,CAACZ,KAAK,WAAY,CAAA6E,KAAK,CAAG7E,KAAK,CAACoF,OAAO,CAAG,yBAAyB,CAAC,CAC1F,CACF,CAAC,CAED,GAAItF,OAAO,CAAE,CACX,mBACEX,IAAA,QAAKwI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpEvI,KAAA,QAAKsI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CzI,IAAA,QAAKwI,SAAS,CAAC,kEAAkE,CAAM,CAAC,cACxFxI,IAAA,SAAMwI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,qBAAmB,CAAM,CAAC,EAC3D,CAAC,CACH,CAAC,CAEV,CAEA,GAAI5H,KAAK,CAAE,CACT,mBACEb,IAAA,QAAKwI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpEvI,KAAA,QAAKsI,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzI,IAAA,CAACP,aAAa,EAAC+I,SAAS,CAAC,qCAAqC,CAAE,CAAC,cACjExI,IAAA,OAAIwI,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,wBAAsB,CAAI,CAAC,cACtFzI,IAAA,MAAGwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAE5H,KAAK,CAAI,CAAC,cACjDb,IAAA,WACE0I,OAAO,CAAElE,SAAU,CACnBgE,SAAS,CAAC,uEAAuE,CAAAC,QAAA,CAClF,WAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,KAAM,CAAAE,iBAAiB,CAAG5B,qBAAqB,CAAC,CAAC,CAEjD,mBACE7G,KAAA,QAAKsI,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAE7BzI,IAAA,QAAKwI,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BzI,IAAA,QAAKwI,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDzI,IAAA,QAAKwI,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBvI,KAAA,QAAKsI,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzDvI,KAAA,QAAAuI,QAAA,eACEzI,IAAA,OAAIwI,SAAS,CAAC,mEAAmE,CAAAC,QAAA,CAAC,qBAElF,CAAI,CAAC,cACLvI,KAAA,MAAGsI,SAAS,CAAC,gCAAgC,CAAAC,QAAA,EAAC,2DAE5C,CAACxH,WAAW,eACVf,KAAA,SAAMsI,SAAS,CAAC,gCAAgC,CAAAC,QAAA,EAAC,uBAC/B,CAACxH,WAAW,EACxB,CACP,EACA,CAAC,EACD,CAAC,cACNf,KAAA,QAAKsI,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eAEvDvI,KAAA,WACEwI,OAAO,CAAEA,CAAA,GAAMpI,QAAQ,CAAC,OAAO,CAAE,CACjCkI,SAAS,CAAC,4OAA4O,CAAAC,QAAA,eAEtPzI,IAAA,CAACN,UAAU,EAAC8I,SAAS,CAAC,cAAc,CAAE,CAAC,aAEzC,EAAQ,CAAC,cAGTtI,KAAA,QAAKsI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CzI,IAAA,QAAKwI,SAAS,CAAE,wBAAwB7G,SAAS,CAAG,cAAc,CAAG,YAAY,EAAG,CAAM,CAAC,cAC3F3B,IAAA,SAAMwI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACxC9G,SAAS,CAAG,cAAc,CAAG,SAAS,CACnC,CAAC,EACJ,CAAC,cAGNzB,KAAA,QAAKsI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CzI,IAAA,UAAO4I,OAAO,CAAC,OAAO,CAACJ,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,OAEzE,CAAO,CAAC,cACRvI,KAAA,WACEyD,EAAE,CAAC,OAAO,CACVkF,KAAK,CAAE9H,aAAc,CACrB+H,QAAQ,CAAGC,CAAC,EAAK/H,gBAAgB,CAACgI,MAAM,CAACD,CAAC,CAACE,MAAM,CAACJ,KAAK,CAAC,CAAE,CAC1DL,SAAS,CAAC,2IAA2I,CAAAC,QAAA,eAErJzI,IAAA,WAAQ6I,KAAK,CAAE,CAAE,CAAAJ,QAAA,CAAC,QAAM,CAAQ,CAAC,cACjCzI,IAAA,WAAQ6I,KAAK,CAAE,CAAE,CAAAJ,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClCzI,IAAA,WAAQ6I,KAAK,CAAE,CAAE,CAAAJ,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClCzI,IAAA,WAAQ6I,KAAK,CAAE,CAAE,CAAAJ,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC5B,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CACH,CAAC,cAGNzI,IAAA,QAAKwI,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1DvI,KAAA,QAAKsI,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCvI,KAAA,QAAKsI,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDvI,KAAA,QAAKsI,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDzI,IAAA,OAAIwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,mBAEtD,CAAI,CAAC,cACLvI,KAAA,QAAKsI,SAAS,CAAC,uDAAuD,CAAAC,QAAA,eACpEvI,KAAA,QAAKsI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzI,IAAA,CAACR,KAAK,EAACgJ,SAAS,CAAC,cAAc,CAAE,CAAC,CACjCjI,UAAU,CAAC2I,MAAM,CAAC,cACrB,EAAK,CAAC,cACNhJ,KAAA,QAAKsI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzI,IAAA,CAACT,KAAK,EAACiJ,SAAS,CAAC,cAAc,CAAE,CAAC,CACjC/H,eAAe,CAACwG,MAAM,CAACkC,CAAC,EAAIA,CAAC,CAAChC,MAAM,CAAC,CAAC+B,MAAM,CAAC,eAChD,EAAK,CAAC,EACH,CAAC,EACH,CAAC,CAGL1H,iBAAiB,eAChBxB,IAAA,QAAKwI,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAClEvI,KAAA,QAAKsI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzI,IAAA,CAACP,aAAa,EAAC+I,SAAS,CAAC,sBAAsB,CAAE,CAAC,cAClDtI,KAAA,QAAKsI,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzI,IAAA,OAAIwI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,sBAEjD,CAAI,CAAC,cACLzI,IAAA,MAAGwI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACrCjH,iBAAiB,CACjB,CAAC,cACJxB,IAAA,WACE0I,OAAO,CAAEA,CAAA,GAAMjH,oBAAoB,CAAC,IAAI,CAAE,CAC1C+G,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CACnE,SAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,cAENzI,IAAA,QAAKwI,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBW,MAAM,CAACC,OAAO,CAACV,iBAAiB,CAAC,CAAClF,GAAG,CAAC6F,IAAA,OAAAC,qBAAA,IAAC,CAAClC,QAAQ,CAAEmC,MAAM,CAAC,CAAAF,IAAA,oBACxDpJ,KAAA,QAA8BsI,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eACtDvI,KAAA,QAAKsI,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDvI,KAAA,OAAIsI,SAAS,CAAC,yCAAyC,CAAAC,QAAA,EACpDpB,QAAQ,CACRA,QAAQ,GAAK,YAAY,eACxBnH,KAAA,SAAMsI,SAAS,CAAC,gCAAgC,CAAAC,QAAA,EAAC,GAC9C,EAAAc,qBAAA,CAAC9I,eAAe,CAACgJ,IAAI,CAACN,CAAC,EAAIA,CAAC,CAACnF,SAAS,GAAKqD,QAAQ,CAAC,UAAAkC,qBAAA,iBAAnDA,qBAAA,CAAqDG,eAAe,CAAC,eACzE,EAAM,CACP,EACC,CAAC,cACLxJ,KAAA,SAAMsI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EACxCe,MAAM,CAACN,MAAM,CAAC,cACjB,EAAM,CAAC,EACJ,CAAC,cAENlJ,IAAA,QAAKwI,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBe,MAAM,CAACN,MAAM,GAAK,CAAC,cAClBlJ,IAAA,QAA+BwI,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAC,wCAE9E,EAFU,SAASpB,QAAQ,EAEtB,CAAC,cAENnH,KAAA,CAAAE,SAAA,EAAAqI,QAAA,eAEEvI,KAAA,QAAKsI,SAAS,CAAC,2HAA2H,CAAAC,QAAA,eACxIzI,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,GAAC,CAAK,CAAC,cAC/CzI,IAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,uBAAqB,CAAK,CAAC,cACvDzI,IAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,cACxCzI,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,UAAQ,CAAK,CAAC,cACtDzI,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,cACvDzI,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,SAAO,CAAK,CAAC,EAClD,CAAC,CACLe,MAAM,CAAC/F,GAAG,CAAC,CAACC,EAAE,CAAEiG,KAAK,GAAK,CACzB,KAAM,CAAAC,UAAU,CAAGzI,iBAAiB,GAAKuC,EAAE,CAACC,EAAE,CAC9C,KAAM,CAAAkG,kBAAkB,CAAGC,KAAK,CAACC,IAAI,CAAC1I,gBAAgB,CAAC2I,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CACnEC,WAAW,EAAIA,WAAW,CAAC9G,aAAa,GAAKM,EAAE,CAACC,EAClD,CAAC,CACD,KAAM,CAAAwG,eAAe,CAAGL,KAAK,CAACC,IAAI,CAAC1I,gBAAgB,CAAC2I,MAAM,CAAC,CAAC,CAAC,CAACP,IAAI,CAChES,WAAW,EAAIA,WAAW,CAAC9G,aAAa,GAAKM,EAAE,CAACC,EAClD,CAAC,CAED,mBACEzD,KAAA,QAEEsI,SAAS,CAAE,wFACToB,UAAU,CACN,uCAAuC,CACvCC,kBAAkB,CAClB,8BAA8B,CAC9B,0DAA0D,eAChD,CAChBnB,OAAO,CAAEA,CAAA,GAAMnB,qBAAqB,CAAC7D,EAAE,CAACC,EAAE,CAAED,EAAE,CAACR,iBAAiB,CAAE,CAAAuF,QAAA,EAGjEoB,kBAAkB,EAAIM,eAAe,eACpCjK,KAAA,QAAKsI,SAAS,CAAC,2FAA2F,CAAAC,QAAA,EAAC,qBACrG,CAAC0B,eAAe,CAACxH,QAAQ,EAC1B,CACN,CAGAiH,UAAU,eACT5J,IAAA,QAAKwI,SAAS,CAAC,yFAAyF,CAAAC,QAAA,CAAC,iBAEzG,CAAK,CACN,cAGDzI,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrCvI,KAAA,SAAMsI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,GACrD,CAACkB,KAAK,CAAG,CAAC,EACP,CAAC,CACJ,CAAC,cAGNzJ,KAAA,QAAKsI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBvI,KAAA,MAAGsI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,KAChD,CAAC/E,EAAE,CAACR,iBAAiB,CAAC,GAAC,CAACQ,EAAE,CAAC0G,WAAW,EAAI,CAAC,EAC7C,CAAC,cACJlK,KAAA,MAAGsI,SAAS,CAAC,oCAAoC,CAAAC,QAAA,EAC9C/E,EAAE,CAACI,aAAa,CAAC,KAAG,CAACJ,EAAE,CAACK,eAAe,EACvC,CAAC,EACD,CAAC,cAGV/D,IAAA,QAAKwI,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxB/G,IAAI,EAAI,CAAC,OAAO,CAAE,WAAW,CAAE,YAAY,CAAC,CAACyG,QAAQ,CAACzG,IAAI,CAAC2I,IAAI,CAAC,cAC/DrK,IAAA,CAACH,cAAc,EACbyK,aAAa,CAAE5G,EAAE,CAACG,MAAO,CACzB2D,WAAW,CAAE9D,EAAE,CAACC,EAAG,CACnB8D,eAAe,CAAE/D,EAAE,CAACR,iBAAkB,CACtCqH,cAAc,CAAE7C,kBAAmB,CACpC,CAAC,cAEF1H,IAAA,SAAMwI,SAAS,CAAE,2EAA2EtC,cAAc,CAACxC,EAAE,CAACG,MAAM,CAAC,EAAG,CAAA4E,QAAA,CACrH/E,EAAE,CAACG,MAAM,CACN,CACP,CACE,CAAC,cAGN3D,KAAA,QAAKsI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCzI,IAAA,MAAGwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACjD/E,EAAE,CAACO,QAAQ,CAACuG,cAAc,CAAC,CAAC,CAC5B,CAAC,cACJxK,IAAA,MAAGwI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACrCjC,cAAc,CAAC9C,EAAE,CAAC+G,oBAAoB,CAAC,CACvC,CAAC,EACD,CAAC,cAGNvK,KAAA,QAAKsI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCzI,IAAA,MAAGwI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACjDtC,UAAU,CAACzC,EAAE,CAACgH,SAAS,CAAC,CACxB,CAAC,CACHhH,EAAE,CAACQ,cAAc,eAChBhE,KAAA,MAAGsI,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EAAC,UAC/B,CAAC/E,EAAE,CAACQ,cAAc,EACzB,CACJ,EACE,CAAC,cAGNlE,IAAA,QAAKwI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpC/E,EAAE,CAACiH,OAAO,cACT3K,IAAA,CAACF,aAAa,EACZ8K,MAAM,CAAElH,EAAE,CAACiH,OAAQ,CACnBlD,eAAe,CAAE/D,EAAE,CAACR,iBAAkB,CACtC2H,UAAU,CAAEnH,EAAE,CAAC0G,WAAY,CAC3BU,IAAI,CAAE,EAAG,CACTC,SAAS,CAAE,KAAM,CACjBvC,SAAS,CAAC,SAAS,CACpB,CAAC,cAEFxI,IAAA,QAAKwI,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,YAEvC,CAAK,CACN,CACE,CAAC,GA/FG,GAAGpB,QAAQ,IAAI3D,EAAE,CAACC,EAAE,EAAID,EAAE,CAACR,iBAAiB,IAAIyG,KAAK,EAgG3D,CAAC,CAEN,CAAC,CAAC,EACF,CACH,CACE,CAAC,GA/IE,QAAQtC,QAAQ,EAgJrB,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}