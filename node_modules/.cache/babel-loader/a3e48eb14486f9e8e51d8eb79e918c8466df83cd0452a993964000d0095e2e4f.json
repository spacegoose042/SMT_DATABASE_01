{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../contexts/AuthContext.tsx';import{AlertTriangle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRoles=[],fallbackPath='/login'}=_ref;const{isAuthenticated,isLoading,user,hasRole}=useAuth();const location=useLocation();// Show loading while checking authentication\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-sy-black-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sy-black-700\",children:\"Checking authentication...\"})]})});}// Redirect to login if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:fallbackPath,state:{from:location},replace:true});}// Check role permissions if required\nif(requiredRoles.length>0&&!hasRole(requiredRoles)){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-sy-black-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-12 w-12 text-red-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900 mb-2\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-600 mb-4\",children:\"You don't have permission to access this page.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-sy-black-500 mb-4\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Your role: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:user===null||user===void 0?void 0:user.role})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Required roles: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:requiredRoles.join(', ')})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),className:\"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\",children:\"Go Back\"})]})});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","AlertTriangle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","requiredRoles","fallbackPath","isAuthenticated","isLoading","user","hasRole","location","className","to","state","from","replace","length","role","join","onClick","window","history","back"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport { AlertTriangle } from 'lucide-react';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRoles?: string[];\n  fallbackPath?: string;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \n  children, \n  requiredRoles = [], \n  fallbackPath = '/login' \n}) => {\n  const { isAuthenticated, isLoading, user, hasRole } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-sy-green-500\"></div>\n          <span className=\"text-sy-black-700\">Checking authentication...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to={fallbackPath} state={{ from: location }} replace />;\n  }\n\n  // Check role permissions if required\n  if (requiredRoles.length > 0 && !hasRole(requiredRoles)) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-sy-black-900 mb-2\">Access Denied</h3>\n          <p className=\"text-sy-black-600 mb-4\">\n            You don't have permission to access this page.\n          </p>\n          <div className=\"text-sm text-sy-black-500 mb-4\">\n            <p>Your role: <span className=\"font-medium\">{user?.role}</span></p>\n            <p>Required roles: <span className=\"font-medium\">{requiredRoles.join(', ')}</span></p>\n          </div>\n          <button\n            onClick={() => window.history.back()}\n            className=\"bg-sy-green-600 hover:bg-sy-green-700 text-white px-4 py-2 rounded-md\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,6BAA6B,CACrD,OAASC,aAAa,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAQ7C,KAAM,CAAAC,cAA6C,CAAGC,IAAA,EAIhD,IAJiD,CACrDC,QAAQ,CACRC,aAAa,CAAG,EAAE,CAClBC,YAAY,CAAG,QACjB,CAAC,CAAAH,IAAA,CACC,KAAM,CAAEI,eAAe,CAAEC,SAAS,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGhB,OAAO,CAAC,CAAC,CAC/D,KAAM,CAAAiB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIe,SAAS,CAAE,CACb,mBACEX,IAAA,QAAKe,SAAS,CAAC,8DAA8D,CAAAR,QAAA,cAC3EL,KAAA,QAAKa,SAAS,CAAC,6BAA6B,CAAAR,QAAA,eAC1CP,IAAA,QAAKe,SAAS,CAAC,kEAAkE,CAAM,CAAC,cACxFf,IAAA,SAAMe,SAAS,CAAC,mBAAmB,CAAAR,QAAA,CAAC,4BAA0B,CAAM,CAAC,EAClE,CAAC,CACH,CAAC,CAEV,CAEA;AACA,GAAI,CAACG,eAAe,CAAE,CACpB,mBAAOV,IAAA,CAACL,QAAQ,EAACqB,EAAE,CAAEP,YAAa,CAACQ,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAS,CAAE,CAACK,OAAO,MAAE,CAAC,CAC1E,CAEA;AACA,GAAIX,aAAa,CAACY,MAAM,CAAG,CAAC,EAAI,CAACP,OAAO,CAACL,aAAa,CAAC,CAAE,CACvD,mBACER,IAAA,QAAKe,SAAS,CAAC,8DAA8D,CAAAR,QAAA,cAC3EL,KAAA,QAAKa,SAAS,CAAC,+DAA+D,CAAAR,QAAA,eAC5EP,IAAA,CAACF,aAAa,EAACiB,SAAS,CAAC,qCAAqC,CAAE,CAAC,cACjEf,IAAA,OAAIe,SAAS,CAAC,4CAA4C,CAAAR,QAAA,CAAC,eAAa,CAAI,CAAC,cAC7EP,IAAA,MAAGe,SAAS,CAAC,wBAAwB,CAAAR,QAAA,CAAC,gDAEtC,CAAG,CAAC,cACJL,KAAA,QAAKa,SAAS,CAAC,gCAAgC,CAAAR,QAAA,eAC7CL,KAAA,MAAAK,QAAA,EAAG,aAAW,cAAAP,IAAA,SAAMe,SAAS,CAAC,aAAa,CAAAR,QAAA,CAAEK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,IAAI,CAAO,CAAC,EAAG,CAAC,cACnEnB,KAAA,MAAAK,QAAA,EAAG,kBAAgB,cAAAP,IAAA,SAAMe,SAAS,CAAC,aAAa,CAAAR,QAAA,CAAEC,aAAa,CAACc,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,EAAG,CAAC,EACnF,CAAC,cACNtB,IAAA,WACEuB,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE,CACrCX,SAAS,CAAC,uEAAuE,CAAAR,QAAA,CAClF,SAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,mBAAOP,IAAA,CAAAI,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}