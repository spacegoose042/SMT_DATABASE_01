{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{CalendarIcon,CogIcon,ArrowPathIcon,ExclamationTriangleIcon,CheckCircleIcon,XCircleIcon}from'@heroicons/react/24/outline';import{useAuth}from'../contexts/AuthContext.tsx';import{useSocket}from'../contexts/SocketContext.tsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Schedule=()=>{const{user}=useAuth();const{onWorkOrderUpdate}=useSocket();// State management\nconst[workOrders,setWorkOrders]=useState([]);const[productionLines,setProductionLines]=useState([]);const[scheduleConfig,setScheduleConfig]=useState({hours_per_day:8,days_per_week:5,efficiency_factor:1.0});// UI State\nconst[selectedLine,setSelectedLine]=useState('all');const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[viewMode,setViewMode]=useState('timeline');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[draggedWorkOrder,setDraggedWorkOrder]=useState(null);const[showConfigModal,setShowConfigModal]=useState(false);const[showLineConfigModal,setShowLineConfigModal]=useState(false);const[selectedLineForConfig,setSelectedLineForConfig]=useState(null);const[editingLineConfig,setEditingLineConfig]=useState(null);const[autoScheduleRunning,setAutoScheduleRunning]=useState(false);// API base URL - use production for local development since local database isn't set up\nconst baseUrl=process.env.NODE_ENV==='production'?window.location.origin:'https://smtdatabase01-production.up.railway.app';// Fetch work orders\nconst fetchWorkOrders=useCallback(async()=>{try{const token=localStorage.getItem('auth_token');const response=await fetch(`${baseUrl}/api/schedule/timeline`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok)throw new Error('Failed to fetch work orders');const data=await response.json();setWorkOrders(data.timeline||[]);}catch(err){console.error('Error fetching work orders:',err);setError('Failed to load work orders');}},[baseUrl]);// Fetch production lines\nconst fetchProductionLines=useCallback(async()=>{try{const token=localStorage.getItem('auth_token');const response=await fetch(`${baseUrl}/api/production-lines`,{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(!response.ok)throw new Error('Failed to fetch production lines');const data=await response.json();setProductionLines(data.production_lines||[]);}catch(err){console.error('Error fetching production lines:',err);setError('Failed to load production lines');}},[baseUrl]);// Update work order schedule\nconst updateWorkOrderSchedule=useCallback(async(workOrderId,scheduleData)=>{try{const response=await fetch(`${baseUrl}/api/schedule/work-orders/${workOrderId}`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('auth_token')}`},body:JSON.stringify(scheduleData)});if(!response.ok)throw new Error('Failed to update schedule');return await response.json();}catch(err){console.error('Error updating schedule:',err);throw err;}},[baseUrl]);// Auto-schedule algorithm\nconst runAutoSchedule=useCallback(async()=>{if(!user||!['admin','scheduler'].includes(user.role)){setError('Insufficient permissions for auto-scheduling');return;}setAutoScheduleRunning(true);try{// Simple auto-scheduling algorithm\nconst availableWorkOrders=workOrders.filter(wo=>wo.status!=='Completed'&&wo.status!=='Cancelled'&&!wo.scheduled_start_time);// Filter out Hand Placement lines from auto-scheduling\nconst availableLines=productionLines.filter(line=>(line.status==='idle'||line.status==='running')&&!line.line_name.toLowerCase().includes('hand')// Exclude Hand Placement\n);// Sort work orders by ship date priority\nconst prioritizedWorkOrders=[...availableWorkOrders].sort((a,b)=>{const dateA=a.ship_date?new Date(a.ship_date):new Date('9999-12-31');const dateB=b.ship_date?new Date(b.ship_date):new Date('9999-12-31');return dateA.getTime()-dateB.getTime();});// Simple assignment algorithm using line-specific configuration\nlet currentTime=new Date(selectedDate);currentTime.setHours(8,0,0,0);// Start at 8 AM\nfor(const workOrder of prioritizedWorkOrders){// Calculate total duration from available time fields\nconst setupHours=workOrder.setup_hours_estimated||0;const productionHours=workOrder.production_time_hours_estimated||0;const productionDays=workOrder.production_time_days_estimated||0;const totalDurationHours=setupHours+productionHours+productionDays*8;// Find best available line based on capacity and efficiency\nconst bestLine=availableLines.find(line=>line.available_capacity>=totalDurationHours&&line.status!=='maintenance'&&line.status!=='down');if(bestLine){// Calculate schedule times using line-specific hours per shift\nconst startTime=new Date(currentTime);const endTime=new Date(startTime);// Apply line-specific time multiplier\nconst adjustedDuration=totalDurationHours*(bestLine.time_multiplier||1.0);endTime.setHours(endTime.getHours()+adjustedDuration);// Update work order with schedule\nawait updateWorkOrderSchedule(workOrder.id,{line_id:bestLine.id,scheduled_start_time:startTime.toISOString(),scheduled_end_time:endTime.toISOString(),line_position:1});// Move time forward\ncurrentTime=new Date(endTime);}}// Refresh data\nawait fetchWorkOrders();setError(null);}catch(err){console.error('Auto-schedule error:',err);setError('Auto-scheduling failed');}finally{setAutoScheduleRunning(false);}},[workOrders,productionLines,selectedDate,user,updateWorkOrderSchedule,fetchWorkOrders]);// Line configuration functions\nconst openLineConfig=line=>{setSelectedLineForConfig(line);setEditingLineConfig({hours_per_shift:line.hours_per_shift||8,shifts_per_day:line.shifts_per_day||1,days_per_week:line.days_per_week||5,time_multiplier:line.time_multiplier||1.0,start_time:line.start_time||'08:00',end_time:line.end_time||'17:00',lunch_break_duration:line.lunch_break_duration||60,lunch_break_start:line.lunch_break_start||'12:00',break_duration:line.break_duration||15,auto_schedule_enabled:true,maintenance_interval_days:30,efficiency_target:85});setShowLineConfigModal(true);};const updateLineConfig=async(lineId,config)=>{try{const token=localStorage.getItem('auth_token');const response=await fetch(`${baseUrl}/api/production-lines/${lineId}/config`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(config)});if(!response.ok)throw new Error('Failed to update line configuration');// Refresh production lines data\nawait fetchProductionLines();setShowLineConfigModal(false);setSelectedLineForConfig(null);setEditingLineConfig(null);}catch(err){console.error('Error updating line config:',err);setError('Failed to update line configuration');}};// Drag and drop handlers\nconst handleDragStart=workOrder=>{setDraggedWorkOrder(workOrder);};const handleDragOver=e=>{e.preventDefault();};const handleDrop=async(e,targetLineId,targetTime)=>{e.preventDefault();if(!draggedWorkOrder)return;try{const targetDateTime=new Date(`${selectedDate}T${targetTime}`);const endDateTime=new Date(targetDateTime);// Calculate total duration from available time fields\nconst setupHours=draggedWorkOrder.setup_hours_estimated||0;const productionHours=draggedWorkOrder.production_time_hours_estimated||0;const productionDays=draggedWorkOrder.production_time_days_estimated||0;const totalDurationHours=setupHours+productionHours+productionDays*8;endDateTime.setHours(endDateTime.getHours()+totalDurationHours);await updateWorkOrderSchedule(draggedWorkOrder.id,{line_id:targetLineId,scheduled_start_time:targetDateTime.toISOString(),scheduled_end_time:endDateTime.toISOString()});// Refresh data\nawait fetchWorkOrders();setDraggedWorkOrder(null);}catch(err){console.error('Drop error:',err);setError('Failed to schedule work order');}};// Load data on mount\nuseEffect(()=>{const loadData=async()=>{setLoading(true);await Promise.all([fetchWorkOrders(),fetchProductionLines()]);setLoading(false);};loadData();},[fetchWorkOrders,fetchProductionLines]);// Real-time updates - using the context's event system\nuseEffect(()=>{const unsubscribe=onWorkOrderUpdate(()=>{fetchWorkOrders();});return unsubscribe;},[onWorkOrderUpdate,fetchWorkOrders]);// Filter work orders by selected line\nconst filteredWorkOrders=selectedLine==='all'?workOrders:workOrders.filter(wo=>wo.line_name===selectedLine);// Generate timeline slots\nconst generateTimelineSlots=()=>{const slots=[];filteredWorkOrders.forEach((workOrder,index)=>{if(workOrder.scheduled_start_time){const startTime=new Date(workOrder.scheduled_start_time);const endTime=workOrder.scheduled_end_time?new Date(workOrder.scheduled_end_time):startTime;const duration=(endTime.getTime()-startTime.getTime())/(1000*60*60);// hours\nslots.push({workOrder,startTime:startTime.toTimeString().slice(0,5),endTime:endTime.toTimeString().slice(0,5),duration,position:index});}});return slots;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-sy-black-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"h-8 w-8 text-sy-green-600 mx-auto mb-4 animate-spin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sy-black-600\",children:\"Loading schedule...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-sy-black-900\",children:\"Production Schedule\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-sy-black-600\",children:\"Manage and optimize production scheduling\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowConfigModal(true),className:\"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-sy-black-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"h-4 w-4 mr-2\"}),\"Config\"]}),user&&['admin','scheduler'].includes(user.role)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:runAutoSchedule,disabled:autoScheduleRunning,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-sy-green-600 hover:bg-sy-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500 disabled:opacity-50\",children:[autoScheduleRunning?/*#__PURE__*/_jsx(ArrowPathIcon,{className:\"h-4 w-4 mr-2 animate-spin\"}):/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4 mr-2\"}),autoScheduleRunning?'Scheduling...':'Auto Schedule']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-sy-black-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mr-1\",children:\"Manual Only\"}),\"Hand Placement excluded\"]})]})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-md p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-700\",children:error})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Production Line\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedLine,onChange:e=>setSelectedLine(e.target.value),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Lines\"}),productionLines.map(line=>/*#__PURE__*/_jsxs(\"option\",{value:line.line_name,children:[line.line_name,line.line_name.toLowerCase().includes('hand')?' (Manual Only)':'']},line.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"View Mode\"}),/*#__PURE__*/_jsxs(\"select\",{value:viewMode,onChange:e=>setViewMode(e.target.value),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"timeline\",children:\"Timeline\"}),/*#__PURE__*/_jsx(\"option\",{value:\"calendar\",children:\"Calendar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"list\",children:\"List\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-sy-black-600\",children:[filteredWorkOrders.length,\" work orders\",/*#__PURE__*/_jsx(\"br\",{}),filteredWorkOrders.filter(wo=>wo.scheduled_start_time).length,\" scheduled\"]})]})]})}),viewMode==='timeline'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:\"Timeline View\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid bg-gray-50 border-b border-gray-200\",style:{gridTemplateColumns:'200px repeat(12, 1fr)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-sm font-medium text-sy-black-700\",children:\"Line\"}),Array.from({length:12},(_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 text-sm font-medium text-sy-black-700 text-center border-l border-gray-200\",children:[8+i,\":00\"]},i))]}),productionLines.map(line=>/*#__PURE__*/_jsxs(\"div\",{className:\"grid border-b border-gray-200\",style:{gridTemplateColumns:'200px repeat(12, 1fr)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 text-sm font-medium text-sy-black-900 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:line.line_name}),line.line_name.toLowerCase().includes('hand')&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\",children:\"Manual Only\"})]}),user&&['admin','scheduler'].includes(user.role)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>openLineConfig(line),className:\"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-sy-black-700 bg-white hover:bg-gray-50\",title:\"Configure line settings\",children:/*#__PURE__*/_jsx(CogIcon,{className:\"h-3 w-3\"})})]})}),Array.from({length:12},(_,i)=>{const timeSlot=`${8+i}:00`;const scheduledWorkOrder=generateTimelineSlots().find(slot=>slot.workOrder.line_name===line.line_name&&slot.startTime===timeSlot);return/*#__PURE__*/_jsx(\"div\",{className:\"p-2 border-l border-gray-200 min-h-[60px] relative\",onDragOver:handleDragOver,onDrop:e=>handleDrop(e,line.id,timeSlot),children:scheduledWorkOrder?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-sy-green-100 border border-sy-green-300 rounded p-2 text-xs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-sy-green-800\",children:scheduledWorkOrder.workOrder.work_order_number}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sy-green-600\",children:[scheduledWorkOrder.duration,\"h\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-xs\",children:\"Available\"})},i);})]},line.id))]})})]}),viewMode==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:\"Work Orders\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Work Order\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Assembly\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Clear to Build\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Ship Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Duration\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredWorkOrders.map(workOrder=>/*#__PURE__*/_jsxs(\"tr\",{draggable:workOrder.clear_to_build,onDragStart:()=>workOrder.clear_to_build&&handleDragStart(workOrder),className:`hover:bg-gray-50 ${workOrder.clear_to_build?'cursor-move':'cursor-not-allowed opacity-60'}`,children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-sy-black-900\",children:workOrder.work_order_number}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\",children:workOrder.customer_name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\",children:workOrder.assembly_number}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${workOrder.status==='Completed'?'bg-green-100 text-green-800':workOrder.status==='Cancelled'?'bg-red-100 text-red-800':'bg-yellow-100 text-yellow-800'}`,children:workOrder.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${workOrder.clear_to_build?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:workOrder.clear_to_build?'Yes':'No'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\",children:workOrder.ship_date?new Date(workOrder.ship_date).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\",children:[workOrder.production_time_hours_estimated||0,\"h\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\",children:workOrder.scheduled_start_time?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 text-green-500 mr-1\"}),new Date(workOrder.scheduled_start_time).toLocaleDateString()]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 text-red-500 mr-1\"}),\"Not scheduled\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-sy-green-600 hover:text-sy-green-900\",onClick:()=>{// TODO: Add toggle clear to build functionality\nconsole.log('Toggle clear to build for:',workOrder.work_order_number);},children:workOrder.clear_to_build?'Mark Not Ready':'Mark Ready'})})]},workOrder.id))})]})})]}),showConfigModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-sy-black-900 mb-4\",children:\"Schedule Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Hours per Day\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:scheduleConfig.hours_per_day,onChange:e=>setScheduleConfig(prev=>({...prev,hours_per_day:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Days per Week\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:scheduleConfig.days_per_week,onChange:e=>setScheduleConfig(prev=>({...prev,days_per_week:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Efficiency Factor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:scheduleConfig.efficiency_factor,onChange:e=>setScheduleConfig(prev=>({...prev,efficiency_factor:parseFloat(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowConfigModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Save configuration logic here\nsetShowConfigModal(false);},className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700\",children:\"Save\"})]})]})})}),showLineConfigModal&&selectedLineForConfig&&editingLineConfig&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",onClick:()=>{setShowLineConfigModal(false);setSelectedLineForConfig(null);setEditingLineConfig(null);},children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-sy-black-900\",children:[\"Configure \",selectedLineForConfig.line_name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLineConfigModal(false);setSelectedLineForConfig(null);setEditingLineConfig(null);},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Hours per Shift\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingLineConfig.hours_per_shift,onChange:e=>setEditingLineConfig(prev=>({...prev,hours_per_shift:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Shifts per Day\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingLineConfig.shifts_per_day,onChange:e=>setEditingLineConfig(prev=>({...prev,shifts_per_day:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Days per Week\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingLineConfig.days_per_week,onChange:e=>setEditingLineConfig(prev=>({...prev,days_per_week:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Time Multiplier\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:editingLineConfig.time_multiplier,onChange:e=>setEditingLineConfig(prev=>({...prev,time_multiplier:parseFloat(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingLineConfig.start_time,onChange:e=>setEditingLineConfig(prev=>({...prev,start_time:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingLineConfig.end_time,onChange:e=>setEditingLineConfig(prev=>({...prev,end_time:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Lunch Break Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingLineConfig.lunch_break_duration,onChange:e=>setEditingLineConfig(prev=>({...prev,lunch_break_duration:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Lunch Break Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editingLineConfig.lunch_break_start,onChange:e=>setEditingLineConfig(prev=>({...prev,lunch_break_start:e.target.value})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-sy-black-700 mb-2\",children:\"Break Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editingLineConfig.break_duration,onChange:e=>setEditingLineConfig(prev=>({...prev,break_duration:parseInt(e.target.value)})),className:\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLineConfigModal(false);setSelectedLineForConfig(null);setEditingLineConfig(null);},className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateLineConfig(selectedLineForConfig.id,editingLineConfig),className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700\",children:\"Save Configuration\"})]})]})})})]});};export default Schedule;","map":{"version":3,"names":["React","useState","useEffect","useCallback","CalendarIcon","CogIcon","ArrowPathIcon","ExclamationTriangleIcon","CheckCircleIcon","XCircleIcon","useAuth","useSocket","jsx","_jsx","jsxs","_jsxs","Schedule","user","onWorkOrderUpdate","workOrders","setWorkOrders","productionLines","setProductionLines","scheduleConfig","setScheduleConfig","hours_per_day","days_per_week","efficiency_factor","selectedLine","setSelectedLine","selectedDate","setSelectedDate","Date","toISOString","split","viewMode","setViewMode","loading","setLoading","error","setError","draggedWorkOrder","setDraggedWorkOrder","showConfigModal","setShowConfigModal","showLineConfigModal","setShowLineConfigModal","selectedLineForConfig","setSelectedLineForConfig","editingLineConfig","setEditingLineConfig","autoScheduleRunning","setAutoScheduleRunning","baseUrl","process","env","NODE_ENV","window","location","origin","fetchWorkOrders","token","localStorage","getItem","response","fetch","headers","ok","Error","data","json","timeline","err","console","fetchProductionLines","production_lines","updateWorkOrderSchedule","workOrderId","scheduleData","method","body","JSON","stringify","runAutoSchedule","includes","role","availableWorkOrders","filter","wo","status","scheduled_start_time","availableLines","line","line_name","toLowerCase","prioritizedWorkOrders","sort","a","b","dateA","ship_date","dateB","getTime","currentTime","setHours","workOrder","setupHours","setup_hours_estimated","productionHours","production_time_hours_estimated","productionDays","production_time_days_estimated","totalDurationHours","bestLine","find","available_capacity","startTime","endTime","adjustedDuration","time_multiplier","getHours","id","line_id","scheduled_end_time","line_position","openLineConfig","hours_per_shift","shifts_per_day","start_time","end_time","lunch_break_duration","lunch_break_start","break_duration","auto_schedule_enabled","maintenance_interval_days","efficiency_target","updateLineConfig","lineId","config","handleDragStart","handleDragOver","e","preventDefault","handleDrop","targetLineId","targetTime","targetDateTime","endDateTime","loadData","Promise","all","unsubscribe","filteredWorkOrders","generateTimelineSlots","slots","forEach","index","duration","push","toTimeString","slice","position","className","children","onClick","disabled","type","value","onChange","target","map","length","style","gridTemplateColumns","Array","from","_","i","title","timeSlot","scheduledWorkOrder","slot","onDragOver","onDrop","work_order_number","draggable","clear_to_build","onDragStart","customer_name","assembly_number","toLocaleDateString","log","prev","parseInt","step","parseFloat","stopPropagation","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/mattspacegrey/Documents/GitHub/SMT_DATABASE_01/src/pages/Schedule.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  CalendarIcon, \n  CogIcon, \n  ArrowPathIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  XCircleIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../contexts/AuthContext.tsx';\nimport { useSocket } from '../contexts/SocketContext.tsx';\n\ninterface WorkOrder {\n  id: string;\n  work_order_number: string;\n  quantity: number;\n  status: string;\n  clear_to_build: boolean; // New field\n  kit_date: string | null;\n  ship_date: string | null;\n  setup_hours_estimated: number | null;\n  production_time_hours_estimated: number | null;\n  production_time_days_estimated: number | null;\n  setup_hours_actual: number | null;\n  production_time_hours_actual: number | null;\n  production_time_days_actual: number | null;\n  completion_date: string | null;\n  trolley_number: number | null;\n  line_id: string | null;\n  line_position: number | null;\n  scheduled_start_time: string | null;\n  scheduled_end_time: string | null;\n  is_hand_placed: boolean;\n  created_at: string;\n  updated_at: string;\n  assembly_number: string;\n  revision: string;\n  description: string | null;\n  customer_name: string;\n  customer_id: string;\n  line_name: string | null;\n  line_type: string | null;\n}\n\ninterface ProductionLine {\n  id: string;\n  line_name: string;\n  line_type: string;\n  status: string;\n  current_utilization: number;\n  available_capacity: number;\n  time_multiplier: number;\n  hours_per_shift: number;\n  shifts_per_day: number;\n  days_per_week: number;\n  start_time: string;\n  end_time: string;\n  lunch_break_duration: number;\n  lunch_break_start: string;\n  break_duration: number;\n  next_available_slot?: string;\n}\n\ninterface ScheduleConfig {\n  hours_per_day: number;\n  days_per_week: number;\n  efficiency_factor: number;\n}\n\ninterface LineConfig {\n  hours_per_shift: number;\n  shifts_per_day: number;\n  days_per_week: number;\n  time_multiplier: number;\n  start_time: string;\n  end_time: string;\n  lunch_break_duration: number;\n  lunch_break_start: string;\n  break_duration: number;\n  auto_schedule_enabled: boolean;\n  maintenance_interval_days: number;\n  efficiency_target: number;\n}\n\ninterface TimelineSlot {\n  workOrder: WorkOrder;\n  startTime: string;\n  endTime: string;\n  duration: number;\n  position: number;\n}\n\nconst Schedule: React.FC = () => {\n  const { user } = useAuth();\n  const { onWorkOrderUpdate } = useSocket();\n  \n  // State management\n  const [workOrders, setWorkOrders] = useState<WorkOrder[]>([]);\n  const [productionLines, setProductionLines] = useState<ProductionLine[]>([]);\n  const [scheduleConfig, setScheduleConfig] = useState<ScheduleConfig>({\n    hours_per_day: 8,\n    days_per_week: 5,\n    efficiency_factor: 1.0\n  });\n  \n  // UI State\n  const [selectedLine, setSelectedLine] = useState<string>('all');\n  const [selectedDate, setSelectedDate] = useState<string>(new Date().toISOString().split('T')[0]);\n  const [viewMode, setViewMode] = useState<'timeline' | 'calendar' | 'list'>('timeline');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [draggedWorkOrder, setDraggedWorkOrder] = useState<WorkOrder | null>(null);\n  const [showConfigModal, setShowConfigModal] = useState(false);\n  const [showLineConfigModal, setShowLineConfigModal] = useState(false);\n  const [selectedLineForConfig, setSelectedLineForConfig] = useState<ProductionLine | null>(null);\n  const [editingLineConfig, setEditingLineConfig] = useState<LineConfig | null>(null);\n  const [autoScheduleRunning, setAutoScheduleRunning] = useState(false);\n\n  // API base URL - use production for local development since local database isn't set up\n  const baseUrl = process.env.NODE_ENV === 'production' \n    ? window.location.origin\n    : 'https://smtdatabase01-production.up.railway.app';\n\n  // Fetch work orders\n  const fetchWorkOrders = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await fetch(`${baseUrl}/api/schedule/timeline`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      if (!response.ok) throw new Error('Failed to fetch work orders');\n      \n      const data = await response.json();\n      setWorkOrders(data.timeline || []);\n    } catch (err) {\n      console.error('Error fetching work orders:', err);\n      setError('Failed to load work orders');\n    }\n  }, [baseUrl]);\n\n  // Fetch production lines\n  const fetchProductionLines = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await fetch(`${baseUrl}/api/production-lines`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      if (!response.ok) throw new Error('Failed to fetch production lines');\n      \n      const data = await response.json();\n      setProductionLines(data.production_lines || []);\n    } catch (err) {\n      console.error('Error fetching production lines:', err);\n      setError('Failed to load production lines');\n    }\n  }, [baseUrl]);\n\n  // Update work order schedule\n  const updateWorkOrderSchedule = useCallback(async (workOrderId: string, scheduleData: any) => {\n    try {\n      const response = await fetch(`${baseUrl}/api/schedule/work-orders/${workOrderId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n        },\n        body: JSON.stringify(scheduleData)\n      });\n\n      if (!response.ok) throw new Error('Failed to update schedule');\n      \n      return await response.json();\n    } catch (err) {\n      console.error('Error updating schedule:', err);\n      throw err;\n    }\n  }, [baseUrl]);\n\n  // Auto-schedule algorithm\n  const runAutoSchedule = useCallback(async () => {\n    if (!user || !['admin', 'scheduler'].includes(user.role)) {\n      setError('Insufficient permissions for auto-scheduling');\n      return;\n    }\n\n    setAutoScheduleRunning(true);\n    try {\n      // Simple auto-scheduling algorithm\n      const availableWorkOrders = workOrders.filter(wo => \n        wo.status !== 'Completed' && wo.status !== 'Cancelled' && !wo.scheduled_start_time\n      );\n\n      // Filter out Hand Placement lines from auto-scheduling\n      const availableLines = productionLines.filter(line => \n        (line.status === 'idle' || line.status === 'running') &&\n        !line.line_name.toLowerCase().includes('hand') // Exclude Hand Placement\n      );\n\n      // Sort work orders by ship date priority\n      const prioritizedWorkOrders = [...availableWorkOrders].sort((a, b) => {\n        const dateA = a.ship_date ? new Date(a.ship_date) : new Date('9999-12-31');\n        const dateB = b.ship_date ? new Date(b.ship_date) : new Date('9999-12-31');\n        return dateA.getTime() - dateB.getTime();\n      });\n\n      // Simple assignment algorithm using line-specific configuration\n      let currentTime = new Date(selectedDate);\n      currentTime.setHours(8, 0, 0, 0); // Start at 8 AM\n\n      for (const workOrder of prioritizedWorkOrders) {\n        // Calculate total duration from available time fields\n        const setupHours = workOrder.setup_hours_estimated || 0;\n        const productionHours = workOrder.production_time_hours_estimated || 0;\n        const productionDays = workOrder.production_time_days_estimated || 0;\n        const totalDurationHours = setupHours + productionHours + (productionDays * 8);\n\n        // Find best available line based on capacity and efficiency\n        const bestLine = availableLines.find(line => \n          line.available_capacity >= totalDurationHours &&\n          line.status !== 'maintenance' &&\n          line.status !== 'down'\n        );\n\n        if (bestLine) {\n          // Calculate schedule times using line-specific hours per shift\n          const startTime = new Date(currentTime);\n          const endTime = new Date(startTime);\n          \n          // Apply line-specific time multiplier\n          const adjustedDuration = totalDurationHours * (bestLine.time_multiplier || 1.0);\n          endTime.setHours(endTime.getHours() + adjustedDuration);\n\n          // Update work order with schedule\n          await updateWorkOrderSchedule(workOrder.id, {\n            line_id: bestLine.id,\n            scheduled_start_time: startTime.toISOString(),\n            scheduled_end_time: endTime.toISOString(),\n            line_position: 1\n          });\n\n          // Move time forward\n          currentTime = new Date(endTime);\n        }\n      }\n\n      // Refresh data\n      await fetchWorkOrders();\n      setError(null);\n    } catch (err) {\n      console.error('Auto-schedule error:', err);\n      setError('Auto-scheduling failed');\n    } finally {\n      setAutoScheduleRunning(false);\n    }\n  }, [workOrders, productionLines, selectedDate, user, updateWorkOrderSchedule, fetchWorkOrders]);\n\n  // Line configuration functions\n  const openLineConfig = (line: ProductionLine) => {\n    setSelectedLineForConfig(line);\n    setEditingLineConfig({\n      hours_per_shift: line.hours_per_shift || 8,\n      shifts_per_day: line.shifts_per_day || 1,\n      days_per_week: line.days_per_week || 5,\n      time_multiplier: line.time_multiplier || 1.0,\n      start_time: line.start_time || '08:00',\n      end_time: line.end_time || '17:00',\n      lunch_break_duration: line.lunch_break_duration || 60,\n      lunch_break_start: line.lunch_break_start || '12:00',\n      break_duration: line.break_duration || 15,\n      auto_schedule_enabled: true,\n      maintenance_interval_days: 30,\n      efficiency_target: 85\n    });\n    setShowLineConfigModal(true);\n  };\n\n  const updateLineConfig = async (lineId: string, config: LineConfig) => {\n    try {\n      const token = localStorage.getItem('auth_token');\n      const response = await fetch(`${baseUrl}/api/production-lines/${lineId}/config`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(config)\n      });\n\n      if (!response.ok) throw new Error('Failed to update line configuration');\n      \n      // Refresh production lines data\n      await fetchProductionLines();\n      setShowLineConfigModal(false);\n      setSelectedLineForConfig(null);\n      setEditingLineConfig(null);\n    } catch (err) {\n      console.error('Error updating line config:', err);\n      setError('Failed to update line configuration');\n    }\n  };\n\n  // Drag and drop handlers\n  const handleDragStart = (workOrder: WorkOrder) => {\n    setDraggedWorkOrder(workOrder);\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = async (e: React.DragEvent, targetLineId: string, targetTime: string) => {\n    e.preventDefault();\n    \n    if (!draggedWorkOrder) return;\n\n    try {\n      const targetDateTime = new Date(`${selectedDate}T${targetTime}`);\n      const endDateTime = new Date(targetDateTime);\n      \n      // Calculate total duration from available time fields\n      const setupHours = draggedWorkOrder.setup_hours_estimated || 0;\n      const productionHours = draggedWorkOrder.production_time_hours_estimated || 0;\n      const productionDays = draggedWorkOrder.production_time_days_estimated || 0;\n      const totalDurationHours = setupHours + productionHours + (productionDays * 8);\n      \n      endDateTime.setHours(endDateTime.getHours() + totalDurationHours);\n\n      await updateWorkOrderSchedule(draggedWorkOrder.id, {\n        line_id: targetLineId,\n        scheduled_start_time: targetDateTime.toISOString(),\n        scheduled_end_time: endDateTime.toISOString()\n      });\n\n      // Refresh data\n      await fetchWorkOrders();\n      setDraggedWorkOrder(null);\n    } catch (err) {\n      console.error('Drop error:', err);\n      setError('Failed to schedule work order');\n    }\n  };\n\n  // Load data on mount\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      await Promise.all([fetchWorkOrders(), fetchProductionLines()]);\n      setLoading(false);\n    };\n\n    loadData();\n  }, [fetchWorkOrders, fetchProductionLines]);\n\n  // Real-time updates - using the context's event system\n  useEffect(() => {\n    const unsubscribe = onWorkOrderUpdate(() => {\n      fetchWorkOrders();\n    });\n\n    return unsubscribe;\n  }, [onWorkOrderUpdate, fetchWorkOrders]);\n\n  // Filter work orders by selected line\n  const filteredWorkOrders = selectedLine === 'all' \n    ? workOrders \n    : workOrders.filter(wo => wo.line_name === selectedLine);\n\n  // Generate timeline slots\n  const generateTimelineSlots = () => {\n    const slots: TimelineSlot[] = [];\n\n    filteredWorkOrders.forEach((workOrder, index) => {\n      if (workOrder.scheduled_start_time) {\n        const startTime = new Date(workOrder.scheduled_start_time);\n        const endTime = workOrder.scheduled_end_time ? new Date(workOrder.scheduled_end_time) : startTime;\n        const duration = (endTime.getTime() - startTime.getTime()) / (1000 * 60 * 60); // hours\n\n        slots.push({\n          workOrder,\n          startTime: startTime.toTimeString().slice(0, 5),\n          endTime: endTime.toTimeString().slice(0, 5),\n          duration,\n          position: index\n        });\n      }\n    });\n\n    return slots;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-sy-black-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <ArrowPathIcon className=\"h-8 w-8 text-sy-green-600 mx-auto mb-4 animate-spin\" />\n          <p className=\"text-sy-black-600\">Loading schedule...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-sy-black-900\">Production Schedule</h1>\n          <p className=\"mt-1 text-sm text-sy-black-600\">\n            Manage and optimize production scheduling\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-3\">\n          <button\n            onClick={() => setShowConfigModal(true)}\n            className=\"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-sy-black-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500\"\n          >\n            <CogIcon className=\"h-4 w-4 mr-2\" />\n            Config\n          </button>\n          \n          {user && ['admin', 'scheduler'].includes(user.role) && (\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={runAutoSchedule}\n                disabled={autoScheduleRunning}\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-sy-green-600 hover:bg-sy-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sy-green-500 disabled:opacity-50\"\n              >\n                {autoScheduleRunning ? (\n                  <ArrowPathIcon className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <CalendarIcon className=\"h-4 w-4 mr-2\" />\n                )}\n                {autoScheduleRunning ? 'Scheduling...' : 'Auto Schedule'}\n              </button>\n              <div className=\"text-xs text-sy-black-500\">\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mr-1\">\n                  Manual Only\n                </span>\n                Hand Placement excluded\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n              <p className=\"mt-1 text-sm text-red-700\">{error}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Controls */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {/* Date Selector */}\n          <div>\n            <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n              Date\n            </label>\n            <input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n            />\n          </div>\n\n          {/* Line Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n              Production Line\n            </label>\n            <select\n              value={selectedLine}\n              onChange={(e) => setSelectedLine(e.target.value)}\n              className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n            >\n              <option value=\"all\">All Lines</option>\n              {productionLines.map(line => (\n                <option key={line.id} value={line.line_name}>\n                  {line.line_name}\n                  {line.line_name.toLowerCase().includes('hand') ? ' (Manual Only)' : ''}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* View Mode */}\n          <div>\n            <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n              View Mode\n            </label>\n            <select\n              value={viewMode}\n              onChange={(e) => setViewMode(e.target.value as any)}\n              className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n            >\n              <option value=\"timeline\">Timeline</option>\n              <option value=\"calendar\">Calendar</option>\n              <option value=\"list\">List</option>\n            </select>\n          </div>\n\n          {/* Stats */}\n          <div>\n            <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n              Summary\n            </label>\n            <div className=\"text-sm text-sy-black-600\">\n              {filteredWorkOrders.length} work orders\n              <br />\n              {filteredWorkOrders.filter(wo => wo.scheduled_start_time).length} scheduled\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Timeline View */}\n      {viewMode === 'timeline' && (\n        <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h3 className=\"text-lg font-medium text-sy-black-900\">Timeline View</h3>\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <div className=\"min-w-full\">\n              {/* Time Headers */}\n              <div className=\"grid bg-gray-50 border-b border-gray-200\" style={{ gridTemplateColumns: '200px repeat(12, 1fr)' }}>\n                <div className=\"p-3 text-sm font-medium text-sy-black-700\">Line</div>\n                {Array.from({ length: 12 }, (_, i) => (\n                  <div key={i} className=\"p-3 text-sm font-medium text-sy-black-700 text-center border-l border-gray-200\">\n                    {8 + i}:00\n                  </div>\n                ))}\n              </div>\n\n              {/* Production Lines */}\n              {productionLines.map(line => (\n                <div key={line.id} className=\"grid border-b border-gray-200\" style={{ gridTemplateColumns: '200px repeat(12, 1fr)' }}>\n                  <div className=\"p-3 text-sm font-medium text-sy-black-900 bg-gray-50\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-2\">\n                        <span>{line.line_name}</span>\n                        {line.line_name.toLowerCase().includes('hand') && (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\n                            Manual Only\n                          </span>\n                        )}\n                      </div>\n                      {user && ['admin', 'scheduler'].includes(user.role) && (\n                        <button\n                          onClick={() => openLineConfig(line)}\n                          className=\"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-sy-black-700 bg-white hover:bg-gray-50\"\n                          title=\"Configure line settings\"\n                        >\n                          <CogIcon className=\"h-3 w-3\" />\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {Array.from({ length: 12 }, (_, i) => {\n                    const timeSlot = `${8 + i}:00`;\n                    const scheduledWorkOrder = generateTimelineSlots().find(slot => \n                      slot.workOrder.line_name === line.line_name &&\n                      slot.startTime === timeSlot\n                    );\n\n                    return (\n                      <div\n                        key={i}\n                        className=\"p-2 border-l border-gray-200 min-h-[60px] relative\"\n                        onDragOver={handleDragOver}\n                        onDrop={(e) => handleDrop(e, line.id, timeSlot)}\n                      >\n                        {scheduledWorkOrder ? (\n                          <div className=\"bg-sy-green-100 border border-sy-green-300 rounded p-2 text-xs\">\n                            <div className=\"font-medium text-sy-green-800\">\n                              {scheduledWorkOrder.workOrder.work_order_number}\n                            </div>\n                            <div className=\"text-sy-green-600\">\n                              {scheduledWorkOrder.duration}h\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"text-gray-400 text-xs\">Available</div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Work Orders List */}\n      {viewMode === 'list' && (\n        <div className=\"bg-white shadow rounded-lg\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h3 className=\"text-lg font-medium text-sy-black-900\">Work Orders</h3>\n          </div>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Work Order\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Customer\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Assembly\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Clear to Build\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Ship Date\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Duration\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Scheduled\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sy-black-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredWorkOrders.map((workOrder) => (\n                  <tr \n                    key={workOrder.id}\n                    draggable={workOrder.clear_to_build}\n                    onDragStart={() => workOrder.clear_to_build && handleDragStart(workOrder)}\n                    className={`hover:bg-gray-50 ${workOrder.clear_to_build ? 'cursor-move' : 'cursor-not-allowed opacity-60'}`}\n                  >\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-sy-black-900\">\n                      {workOrder.work_order_number}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\">\n                      {workOrder.customer_name}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\">\n                      {workOrder.assembly_number}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        workOrder.status === 'Completed' ? 'bg-green-100 text-green-800' :\n                        workOrder.status === 'Cancelled' ? 'bg-red-100 text-red-800' :\n                        'bg-yellow-100 text-yellow-800'\n                      }`}>\n                        {workOrder.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        workOrder.clear_to_build ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                      }`}>\n                        {workOrder.clear_to_build ? 'Yes' : 'No'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\">\n                      {workOrder.ship_date ? new Date(workOrder.ship_date).toLocaleDateString() : 'N/A'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\">\n                      {workOrder.production_time_hours_estimated || 0}h\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sy-black-500\">\n                      {workOrder.scheduled_start_time ? (\n                        <div className=\"flex items-center\">\n                          <CheckCircleIcon className=\"h-4 w-4 text-green-500 mr-1\" />\n                          {new Date(workOrder.scheduled_start_time).toLocaleDateString()}\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center\">\n                          <XCircleIcon className=\"h-4 w-4 text-red-500 mr-1\" />\n                          Not scheduled\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <button \n                        className=\"text-sy-green-600 hover:text-sy-green-900\"\n                        onClick={() => {\n                          // TODO: Add toggle clear to build functionality\n                          console.log('Toggle clear to build for:', workOrder.work_order_number);\n                        }}\n                      >\n                        {workOrder.clear_to_build ? 'Mark Not Ready' : 'Mark Ready'}\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Configuration Modal */}\n      {showConfigModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <h3 className=\"text-lg font-medium text-sy-black-900 mb-4\">Schedule Configuration</h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Hours per Day\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scheduleConfig.hours_per_day}\n                    onChange={(e) => setScheduleConfig(prev => ({ ...prev, hours_per_day: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Days per Week\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={scheduleConfig.days_per_week}\n                    onChange={(e) => setScheduleConfig(prev => ({ ...prev, days_per_week: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Efficiency Factor\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={scheduleConfig.efficiency_factor}\n                    onChange={(e) => setScheduleConfig(prev => ({ ...prev, efficiency_factor: parseFloat(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowConfigModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => {\n                    // Save configuration logic here\n                    setShowConfigModal(false);\n                  }}\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700\"\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Line Configuration Modal */}\n      {showLineConfigModal && selectedLineForConfig && editingLineConfig && (\n        <div \n          className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\"\n          onClick={() => {\n            setShowLineConfigModal(false);\n            setSelectedLineForConfig(null);\n            setEditingLineConfig(null);\n          }}\n        >\n          <div \n            className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"mt-3\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-sy-black-900\">\n                  Configure {selectedLineForConfig.line_name}\n                </h3>\n                <button\n                  onClick={() => {\n                    setShowLineConfigModal(false);\n                    setSelectedLineForConfig(null);\n                    setEditingLineConfig(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Hours per Shift\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingLineConfig.hours_per_shift}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, hours_per_shift: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Shifts per Day\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingLineConfig.shifts_per_day}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, shifts_per_day: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Days per Week\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingLineConfig.days_per_week}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, days_per_week: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Time Multiplier\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={editingLineConfig.time_multiplier}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, time_multiplier: parseFloat(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Start Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingLineConfig.start_time}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, start_time: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    End Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingLineConfig.end_time}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, end_time: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Lunch Break Duration (minutes)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingLineConfig.lunch_break_duration}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, lunch_break_duration: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Lunch Break Start Time\n                  </label>\n                  <input\n                    type=\"time\"\n                    value={editingLineConfig.lunch_break_start}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, lunch_break_start: e.target.value }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-sy-black-700 mb-2\">\n                    Break Duration (minutes)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={editingLineConfig.break_duration}\n                    onChange={(e) => setEditingLineConfig(prev => ({ ...prev!, break_duration: parseInt(e.target.value) }))}\n                    className=\"block w-full border-gray-300 rounded-md shadow-sm focus:ring-sy-green-500 focus:border-sy-green-500 sm:text-sm\"\n                  />\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={() => {\n                    setShowLineConfigModal(false);\n                    setSelectedLineForConfig(null);\n                    setEditingLineConfig(null);\n                  }}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-sy-black-700 hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => updateLineConfig(selectedLineForConfig.id, editingLineConfig)}\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sy-green-600 hover:bg-sy-green-700\"\n                >\n                  Save Configuration\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Schedule; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}